<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-translate-key="portfolioTitle">Komronbek Atavullayev - Turizm Menejeri Portfoliosi</title>
    <meta name="description" data-translate-key="aboutMeContent" content="Komronbek Atavullayevning turizm menejeri portfoliosi. Mijozlarga yuqori sifatli xizmat ko'rsatish va unutilmas sayohat tajribalarini yaratishga intiluvchi yosh va g'ayratli mutaxassis.">
    <meta name="keywords" content="turizm, menejer, sayohat, tashkilotchi, Komronbek Atavullayev, portfolio, O'zbekiston, sayyohlik">
    <meta name="author" content="Komronbek Atavullayev">
    <meta name="google-adsense-account" content="ca-pub-2435346542328852">

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome for social media icons (Updated to stable 6.5.1) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!-- jQuery CDN (not strictly needed but kept for consistency if other scripts rely on it) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <style>
        /* Define CSS variables for theming */
        :root {
            --hue: 223;
            --bg: hsl(var(--hue),10%,90%); /* Light background */
            --fg: hsl(var(--hue),10%,10%); /* Dark text */
            --main-blue: #3b82f6; /* Tailwind blue-500 */
            --dark-blue: #2563eb; /* Tailwind blue-600 */
            --light-blue: #93c5fd; /* Tailwind blue-300 */
            --dark-bg-card: #1a202c; /* Darker card background for dark mode */
            --dark-bg-nested-card: #2d3748; /* Slightly lighter for nested cards */
            --dark-bg-body: hsl(var(--hue),10%,10%); /* Dark body background */
            --dark-text: hsl(var(--hue),10%,90%); /* Light text for dark theme */
            --light-text: #1f2937; /* Dark text for light theme */
            --gray-line: #cbd5e1;
            --dark-gray-line: #4a5568;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg); /* Use CSS variable for background */
            color: var(--fg); /* Use CSS variable for text color */
            transition: background-color 0.3s ease, color 0.3s ease;
            min-height: 100vh; /* Ensure body covers full viewport height */
            overflow-x: hidden; /* Prevent horizontal scrolling */
            overflow-y: auto; /* Allow vertical scrolling */
        }
        /* Apply dark mode styles to html element */
        html.dark body {
            background-color: var(--dark-bg-body); /* Dark background */
            color: var(--dark-text); /* Light gray text for dark theme */
        }
        /* Dark theme for preloader SVG elements */
        html.dark .pl__ring {
            stroke: hsla(var(--hue),10%,90%,0.1);
        }

        /* Ensure Font Awesome icons render correctly */
        .fas, .fab {
            font-family: 'Font Awesome 6 Free';
            font-weight: 900; /* For solid icons (fas) */
        }
        .fab {
            font-weight: 400; /* For brand icons (fab) */
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1.5rem;
        }
        .section-title {
            position: relative;
            padding-bottom: 0.5rem;
            margin-bottom: 1.5rem;
            color: var(--main-blue); /* Blue accent for titles in light theme */
        }
        html.dark .section-title {
            color: var(--light-blue); /* Lighter blue for dark mode titles */
        }
        .section-title::after {
            content: '';
            position: absolute;
            left: 0;
            bottom: 0;
            width: 60px;
            height: 4px;
            background-color: var(--main-blue); /* Blue accent */
            border-radius: 9999px;
        }
        html.dark .section-title::after {
            background-color: var(--light-blue); /* Lighter blue for dark mode */
        }
        .card {
            background-color: #ffffff; /* Card background for light theme */
            border-radius: 1rem; /* More rounded corners */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            padding: 2rem;
            margin-bottom: 2rem;
            transition: background-color 0.3s ease, box-shadow 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px); /* Keep hover effect */
        }
        html.dark .card {
            background-color: var(--dark-bg-card); /* Darker gray for cards in dark mode */
        }

        .skill-badge {
            background-color: #e0f2fe; /* Light blue for light theme */
            color: #1e40af; /* Darker blue for light theme */
            padding: 0.5rem 1rem;
            border-radius: 9999px;
            font-weight: 500;
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
            display: inline-block;
            transition: background-color 0.3s ease, color 0.3s ease, transform 0.2s ease, box-shadow 0.2s ease; /* Added transform and box-shadow for hover */
        }
        .skill-badge:hover {
            transform: translateY(-2px); /* Lift effect on hover */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Subtle shadow on hover */
        }
        html.dark .skill-badge {
            background-color: var(--dark-gray-line); /* Darker badge background for dark theme */
            color: #a0aec0; /* Lighter badge text for dark theme */
        }
        html.dark .skill-badge:hover {
            box-shadow: 0 4px 8px rgba(255, 255, 255, 0.1); /* Subtle white shadow on hover in dark mode */
        }

        .contact-info a {
            color: var(--main-blue); /* Link color for light theme */
            text-decoration: none;
            transition: color 0.2s ease-in-out;
            word-break: break-all; /* Ensure long email addresses break and wrap */
            overflow-wrap: break-word; /* Fallback for word-break */
        }
        html.dark .contact-info a {
            color: var(--light-blue); /* Link color for dark theme */
        }
        html.dark .contact-info a:hover {
            color: #60a5fa; /* Hover link color for dark theme */
        }

        /* Explicit text colors for light theme within cards */
        .card p,
        .card ul li,
        .card label,
        .skill-item span {
            color: var(--light-text); /* Explicitly a very dark gray (almost black) */
        }

        /* Input/Textarea backgrounds and text colors */
        .card input,
        .card textarea {
            background-color: #ffffff; /* Light mode input background */
            color: var(--light-text); /* Light mode input text */
        }
        html.dark .card input,
        html.dark .card textarea {
            background-color: #4b5563; /* Darker gray for inputs in dark mode */
            color: var(--dark-text); /* Light text for inputs in dark mode */
        }

        /* Ensure backgrounds for specific elements are white in light mode */
        .card .bg-white {
            background-color: #ffffff; /* Explicitly white */
        }

        /* Ensure dark mode styles are correctly applied to nested elements within cards */
        html.dark .card .bg-white { /* This targets the inner divs within projects */
            background-color: var(--dark-bg-nested-card); /* Slightly lighter than main card for contrast */
        }

        /* Ensure dark mode styles are correctly applied to general text within cards */
        html.dark .card p,
        html.dark .card ul li,
        html.dark .card label,
        html.dark .skill-item span {
            color: var(--dark-text); /* Light gray for dark theme */
        }


        /* Scroll to top/bottom button */
        #scroll-button {
            position: fixed;
            bottom: 54px; /* Moved down to avoid overlap with footer icons */
            right: 15px;
            background-color: var(--main-blue);
            color: white;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.3s ease;
            z-index: 1000;
        }

        #scroll-button:hover {
            background-color: var(--dark-blue);
            transform: scale(1.1);
        }
        html.dark #scroll-button {
            background-color: var(--light-blue);
            color: var(--light-text);
        }
        html.dark #scroll-button:hover {
            background-color: #60a5fa;
        }

        /* Preloader styles */
        #preloader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--bg); /* Match body background */
            display: grid; /* Use grid for centering content */
            place-items: center; /* Center content horizontally and vertically */
            z-index: 9999;
            transition: opacity 0.5s ease-out;
            color: var(--fg); /* Inherit text color from root */
        }
        /* Preloader SVG and animation styles */
        .pl,
        .pl__worm {
            animation-duration: 3s;
            animation-iteration-count: infinite;
        }
        .pl {
            animation-name: bump;
            animation-timing-function: linear;
            width: 8em;
            height: 8em;
        }
        .pl__ring {
            stroke: hsla(var(--hue),10%,10%,0.1);
            transition: stroke 0.3s;
        }
        .pl__worm {
            animation-name: worm;
            animation-timing-function: cubic-bezier(0.42,0.17,0.75,0.83);
        }

        /* Animations for preloader */
        @keyframes bump {
            from,
            42%,
            46%,
            51%,
            55%,
            59%,
            63%,
            67%,
            71%,
            74%,
            78%,
            81%,
            85%,
            88%,
            92%,
            to { transform: translate(0,0); }
            44% { transform: translate(1.33%,6.75%); }
            53% { transform: translate(-16.67%,-0.54%); }
            61% { transform: translate(3.66%,-2.46%); }
            69% { transform: translate(-0.59%,15.27%); }
            76% { transform: translate(-1.92%,-4.68%); }
            83% { transform: translate(9.38%,0.96%); }
            90% { transform: translate(-4.55%,1.98%); }
        }
        @keyframes worm {
            from { stroke-dashoffset: 10; }
            25% { stroke-dashoffset: 295; }
            to { stroke-dashoffset: 1165; }
        }

        /* 404 Page Specific Styles (Embedded) */
        #not-found-page * {
            box-sizing: border-box;
        }

        #not-found-page {
            background: #000;
            font-family: Arial, "Helvetica Neue", Helvetica, sans-serif;
            overflow: hidden; /* Ensure no scrollbars on 404 page itself */
            display: flex; /* Use flexbox for centering */
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 1rem; /* Add some padding */
            text-align: center; /* Center text */
        }

        /* Ensure the hidden class works reliably */
        .hidden {
            display: none !important;
        }

        .head-404 {
            display: block;
            position: relative;
            width: 80%; /* Responsive width */
            max-width: 200px; /* Max width for desktop look */
            margin: 5% auto 0; /* Adjusted top margin */
            animation: shvr .2s infinite;
        }

        .head-404 .eye-404 {
            width: 20px;
            height: 20px;
            background: #000;
            position: absolute;
            top: 30px;
            border-radius: 50%;
            animation: eye 2.5s infinite;
        }
        .head-404 .eye-404:first-of-type {
            left: 25px;
        }
        .head-404 .eye-404:last-of-type {
            left: 145px; /* Adjusted for second eye position */
        }


        .meta-404 {
            position: relative;
            display: inline-block;
            background: #fff;
            width: 75px;
            height: 80px;
            border-radius: 50% 50% 50% 50% / 45px 45px 45% 45%;
        }
        .meta-404:first-of-type {
            transform: rotate(45deg);
        }
        .meta-404:first-of-type::after {
            content: '';
            position: absolute;
            border-bottom: 2px solid #fff;
            width: 70px;
            height: 50px;
            left:0px;
            bottom: -10px;
            border-radius: 50%;
        }
        .meta-404:first-of-type::before {
            content: '';
            position: absolute;
            bottom: auto;
            top: -100px;
            transform: rotate(45deg);
            left: 0;
        }

        .meta-404:nth-of-type(2){
            float: right;
            transform: rotate(-45deg);
        }
        .meta-404:nth-of-type(2)::after{
            content: '';
            position: absolute;
            border-bottom: 2px solid #fff;
            width: 70px;
            height: 50px;
            left:5px;
            bottom: -10px;
            border-radius: 50%;
        }
        .meta-404:nth-of-type(2)::before {
            content: '';
            position: absolute;
            bottom: auto;
            top: -100px;
            transform: rotate(45deg);
            left: 0;
        }

        .body-404-content {
            margin-top: 50px; /* Adjusted margin-top for 404 content */
            text-align: center;
            color: #fff;
            width: 90%; /* Fluid width */
            max-width: 400px; /* Max width */
        }
        .body-404-content .error-code {
            font-size: 50px; /* Slightly smaller for mobile and desktop */
            font-weight: 800;
            display: block;
            margin-bottom: 10px;
        }
        .body-404-content .error-message {
            color: #1EA7AB;
            width: 100%; /* Fluid width */
            font-size: 20px; /* Slightly smaller for mobile and desktop */
            overflow: hidden;
            display: inline-block;
            white-space: normal; /* Allow wrapping on all screen sizes */
            animation: none; /* Disable animation */
            text-indent: 0; /* Reset text indent */
            line-height: 1.3; /* Better readability */
        }

        @media (min-width: 768px) {
            .body-404-content .error-code {
                font-size: 70px; /* Adjusted size for desktop */
            }
            .body-404-content .error-message {
                font-size: 24px; /* Adjusted size for desktop */
            }
        }

        @keyframes eye {
            0% ,30% , 55%, 90% , 100%{ transform: translate(0 , 0) }
            10%, 25%{ transform: translate( 0 , 20px) }
            65%{ transform: translate(-20px, 0) }
            80%{ transform: translate(20px, 0) }
        }

        @keyframes shvr {
            0%{ transform: translate(1px) }
            50%{ transform: translate(0) }
            100%{ transform: translate(-1px) }
        }

        /* Removed @keyframes text-show as it's no longer needed for wrapping text */

        /* Button loading animation styles */
        .button-loading {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 12.5rem;
            padding: 1.5rem 3.125rem;
            background-color: var(--main-blue); /* Tailwind blue-600 */
            border: none;
            border-radius: 0.3125rem;
            box-shadow: 0 12px 24px 0 rgba(0,0,0,0.2);
            color: white;
            font-weight: 300;
            text-transform: uppercase;
            overflow: hidden;
            transition: background-color 0.3s ease; /* Smooth transition for background */
        }

        .button-loading::before {
            position: absolute;
            content: '';
            bottom: 0;
            left: 0;
            width: 0%;
            height: 100%;
            background-color: #2ecc71; /* Green color for success */
            transition: width 3s linear; /* Animation duration for the fill */
        }

        .button-loading span {
            position: absolute;
            line-height: 0;
        }

        .button-loading .submit-text {
            top: 50%;
            transform: translateY(-50%);
            transition: top 0.5s ease, transform 0.5s ease;
        }

        .button-loading .loading-icon {
            top: 100%;
            transform: translateY(0%);
            font-size: 24px;
            transition: top 0.5s ease, transform 0.5s ease;
        }
        .button-loading .loading-icon i {
            transform-origin: center center;
        }

        .button-loading .check-icon {
            display: none; /* Hidden by default */
            font-size: 24px;
        }

        .button-loading.active {
            background-color: #2ecc71; /* Green when active (loading) */
        }

        .button-loading.active::before {
            width: 100%;
        }

        .button-loading.active .submit-text {
            top: -100%;
            transform: translateY(-50%);
        }

        .button-loading.active .loading-icon {
            top: 50%;
            transform: translateY(-50%);
        }

        .button-loading.active .loading-icon i {
            animation: loading-spin 0.5s linear infinite;
        }

        .button-loading.finished {
            background-color: #2ecc71; /* Keep green when finished */
        }

        .button-loading.finished .submit-text,
        .button-loading.finished .loading-icon {
            display: none;
        }

        .button-loading.finished .check-icon {
            display: block !important;
            animation: scale-check 0.5s linear;
        }

        @keyframes loading-spin {
            100% { transform: rotate(360deg); }
        }

        @keyframes scale-check {
            0%   { transform: scale(10); opacity: 0; }
            50%  { transform: scale(0.2); opacity: 1; }
            70%  { transform: scale(1.2); }
            90%  { transform: scale(0.7); }
            100% { transform: scale(1); opacity: 1; }
        }

        /* Simple Toggle Switch Styles */
        .theme-toggle-label {
            display: flex;
            align-items: center;
            cursor: pointer;
        }
        .theme-toggle-input {
            position: absolute;
            left: -9999px; /* Hide checkbox visually */
        }
        .theme-toggle-slider {
            display: block;
            background-color: #6b7280; /* bg-gray-600 */
            width: 3.5rem; /* w-14 */
            height: 2rem; /* h-8 */
            border-radius: 9999px; /* rounded-full */
            position: relative;
            transition: background-color 0.3s ease;
        }
        .theme-toggle-circle {
            position: absolute;
            left: 0.25rem; /* left-1 */
            top: 0.25rem; /* top-1 */
            background-color: white;
            width: 1.5rem; /* w-6 */
            height: 1.5rem; /* h-6 */
            border-radius: 9999px; /* rounded-full */
            transition: transform 0.3s ease;
        }
        .theme-toggle-input:checked + .theme-toggle-slider {
            background-color: var(--main-blue); /* Blue when checked */
        }
        .theme-toggle-input:checked + .theme-toggle-slider .theme-toggle-circle {
            transform: translateX(1.5rem); /* Move to right */
        }
        .theme-toggle-text {
            margin-left: 0.75rem; /* ml-3 */
            color: #374151; /* text-gray-700 */
            font-weight: 500; /* font-medium */
            transition: color 0.3s ease;
        }
        html.dark .theme-toggle-text {
            color: #e5e7eb; /* dark:text-gray-200 */
        }

        /* Language Modal Styles */
        .language-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000; /* Higher than preloader */
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .language-modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        .language-modal-content {
            background-color: white;
            padding: 2rem;
            border-radius: 1rem;
            text-align: center;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            max-width: 90%;
            width: 400px;
            transform: translateY(-20px);
            opacity: 0;
            transition: transform 0.3s ease, opacity 0.3s ease;
            position: relative; /* For close button positioning */
        }
        .language-modal-overlay.active .language-modal-content {
            transform: translateY(0);
            opacity: 1;
        }
        html.dark .language-modal-content {
            background-color: var(--dark-bg-card);
            color: var(--dark-text);
        }
        .language-modal-content button {
            background-color: var(--main-blue);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            margin: 0.5rem;
            font-size: 1rem;
            font-weight: 600;
            transition: background-color 0.2s ease, transform 0.1s ease;
        }
        .language-modal-content button:hover {
            background-color: var(--dark-blue);
            transform: translateY(-2px);
        }
        html.dark .language-modal-content button {
            background-color: var(--light-blue);
            color: var(--light-text);
        }
        html.dark .language-modal-content button:hover {
            background-color: #60a5fa;
        }
        /* Close button for language modal */
        .language-modal-content .close-modal-btn {
            position: absolute;
            top: 0.5rem; /* Adjusted top for better spacing */
            right: 0.5rem; /* Adjusted right for better spacing */
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--fg); /* Inherit text color */
            transition: color 0.2s ease;
            width: 2rem; /* Ensure clickable area */
            height: 2rem; /* Ensure clickable area */
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10; /* Ensure it's above text */
        }
        html.dark .language-modal-content .close-modal-btn {
            color: var(--dark-text);
        }
        .language-modal-content .close-modal-btn:hover {
            color: var(--main-blue);
        }
        html.dark .language-modal-content .close-modal-btn:hover {
            color: var(--light-blue);
        }


        /* Initially hide main content and scroll button */
        #main-content-wrapper, #scroll-button {
            display: none;
        }

        /* Styles for collapsible sections in Skills */
        .collapsible-header {
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 5rem 0;
            border-bottom: 1px solid var(--gray-line);
            margin-bottom: 0.5rem;
            transition: border-color 0.3s ease;
        }
        html.dark .collapsible-header {
            border-color: var(--dark-gray-line);
        }
        .collapsible-header:hover {
            opacity: 0.8;
        }
        .collapsible-header h3 {
            margin-bottom: 0; /* Remove default margin */
            color: var(--main-blue); /* Ensure title color is consistent */
            transition: color 0.3s ease;
        }
        html.dark .collapsible-header h3 {
            color: var(--light-blue);
        }
        .collapsible-icon {
            transition: transform 0.3s ease;
        }
        .collapsible-header.expanded .collapsible-icon {
            transform: rotate(90deg);
        }
        .collapsible-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out, opacity 0.5s ease-out;
            opacity: 0;
        }
        .collapsible-content.expanded {
            max-height: 500px; /* Adjust as needed for content height */
            opacity: 1;
            overflow: visible; /* Allow content to be fully visible */
        }

        /* Progress Bar Styles */
        .progress-bar-container-skill {
            width: 100%;
            background-color: var(--gray-line); /* Light gray background for the track */
            height: 8px; /* Height of the progress bar */
            border-radius: 9999px; /* Fully rounded corners */
            overflow: hidden; /* Ensure the filling bar stays within bounds */
        }
        html.dark .progress-bar-container-skill {
            background-color: var(--dark-gray-line); /* Darker gray for dark mode */
        }
        .progress-bar-skill {
            height: 100%; /* Fill the container height */
            background-color: var(--main-blue); /* Blue color for the filled portion */
            width: 0%; /* Initial width for animation */
            border-radius: 9999px; /* Rounded corners for the filled portion */
            transition: width 1s ease-out; /* Smooth transition for width */
        }
        html.dark .progress-bar-skill {
            background-color: var(--light-blue); /* Lighter blue for dark mode */
        }

        /* Interactive button for projects */
        .interactive-button {
            display: inline-block;
            padding: 0.75rem 1.5rem;
            background-color: var(--main-blue);
            color: white;
            border-radius: 0.5rem;
            font-weight: 600;
            text-align: center;
            text-decoration: none;
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .interactive-button:hover {
            background-color: var(--dark-blue);
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.15);
        }
        html.dark .interactive-button {
            background-color: var(--light-blue);
            color: var(--light-text);
        }
        html.dark .interactive-button:hover {
            background-color: #60a5fa;
        }

        /* Real-time clock specific styles */
        #real-time-clock {
            color: white;
            font-size: 1.25rem; /* text-xl */
            font-weight: 500; /* font-medium */
            margin-top: 1rem;
            text-align: center;
            transition: color 0.3s ease; /* Smooth transition for dark mode */
        }
        html.dark #real-time-clock {
            color: #d1d5db; /* text-gray-300 for dark mode */
        }
        @media (min-width: 768px) {
            #real-time-clock {
                font-size: 1.5rem; /* text-2xl on larger screens */
            }
        }

        header#main-header {
          padding-top: 0rem;
          padding-bottom: 0.5rem;
        }

        /* Language buttons style (for hamburger menu) */
        .lang-button {
            background-color: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 0.5rem 0.75rem; /* Smaller padding for compactness */
            border-radius: 9999px; /* Fully rounded */
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s ease, transform 0.1s ease;
            font-size: 0.875rem; /* text-sm */
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 50px; /* Ensure minimum width for consistency */
        }
        .lang-button:hover {
            background-color: rgba(255, 255, 255, 0.3);
            transform: translateY(-1px);
        }
        html.dark .lang-button {
            background-color: rgba(0, 0, 0, 0.2);
            color: #d1d5db; /* Light gray text for dark mode */
        }
        html.dark .lang-button:hover {
            background-color: rgba(0, 0, 0, 0.3);
        }
        /* Active language button */
        .lang-button.active-lang {
            background-color: var(--light-blue); /* Lighter blue for active in light mode */
            color: var(--light-text); /* Dark text for active in light mode */
            box-shadow: 0 0 0 2px rgba(255,255,255,0.5); /* White border for active */
        }
        html.dark .lang-button.active-lang {
            background-color: var(--dark-blue); /* Darker blue for active in dark mode */
            color: white; /* White text for active in dark mode */
            box-shadow: 0 0 0 2px rgba(0,0,0,0.5); /* Dark border for active */
        }

        /* Hamburger Menu Styles */
        .menu-container {
            z-index: 1050; /* Above other header elements */
            position: absolute;
            top: 2.5rem; /* Adjusted top to align with "ATAVULLAYEV KOMRONBEK" */
            right: 1.5rem;
        }
        #hamburger-toggle-btn {
            display: flex;
            flex-direction: column;
            justify-content: space-around;
            width: 1.6rem; /* 8 units = 32px */
            height: 2rem; /* 8 units = 32px */
            background-color: transparent;
            border: none;
            cursor: pointer;
            padding: 0;
            position: relative; /* For positioning lines */
        }
        #hamburger-toggle-btn:focus {
            outline: none;
        }
        .hamburger-line {
            display: block;
            width: 100%;
            height: 2px; /* 0.5 units */
            background-color: white;
            border-radius: 1px;
            transition: all 0.3s ease-in-out;
            transform-origin: center;
        }
        html.dark .hamburger-line {
            background-color: var(--dark-text); /* White lines in dark mode */
        }

        /* Hamburger to X transformation */
        #hamburger-toggle-btn.active .hamburger-line:nth-child(1) {
            transform: translateY(7px) rotate(45deg); /* Move down and rotate */
        }
        #hamburger-toggle-btn.active .hamburger-line:nth-child(2) {
            opacity: 0; /* Hide middle line */
        }
        #hamburger-toggle-btn.active .hamburger-line:nth-child(3) {
            transform: translateY(-7px) rotate(-45deg); /* Move up and rotate */
        }

        /* Mobile Menu Overlay and Content */
        #mobile-menu-overlay {
            position: fixed;
            top: 0; /* Covers entire screen */
            left: 0;
            width: 100%;
            height: 100vh; /* Covers entire viewport height */
            background-color: rgba(0, 0, 0, 0.7); /* Darker, more opaque background */
            display: flex; /* Use flex to push content to the right */
            justify-content: flex-end; /* Push mobile menu content to the right */
            align-items: flex-start; /* Align content to the top within the overlay */
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        #mobile-menu-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        #mobile-menu-content {
            width: 70%; /* Adjust width as needed */
            max-width: 300px;
            height: auto; /* Auto height instead of 100% */
            max-height: 80vh; /* Limit height to 80% of viewport */
            background-color: var(--bg); /* Match body background */
            padding: 2rem; /* Adjusted padding-top for content to start higher */
            box-shadow: -5px 0 15px rgba(0, 0, 0, 0.2);
            transform: translateX(100%);
            transition: transform 0.3s ease;
            z-index: 1010; /* Above overlay */
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 1.5rem;
            /* Ensure text color is correct in light mode */
            color: var(--fg);
            margin-top: 2rem; /* Add top margin to avoid covering header */
            border-radius: 1rem 0 0 1rem; /* Rounded corners on left side */
            position: relative; /* For close button positioning */
        }
        html.dark #mobile-menu-content {
            background-color: var(--dark-bg-body);
            color: var(--dark-text); /* Ensure text color is correct in dark mode */
        }
        #mobile-menu-content.active {
            transform: translateX(0);
        }
        /* Ensure elements inside mobile menu also respect theme colors */
        #mobile-menu-content a,
        #mobile-menu-content .theme-toggle-text,
        #mobile-menu-content .lang-button {
            color: var(--fg);
        }
        html.dark #mobile-menu-content a,
        html.dark #mobile-menu-content .theme-toggle-text,
        html.dark #mobile-menu-content .lang-button {
            color: var(--dark-text);
        }


        /* Hide desktop language/theme selectors on small screens, show hamburger */
        @media (max-width: 767px) {
            .header-controls-desktop {
                display: none;
            }
            .menu-container {
                display: block; /* Show hamburger on mobile */
            }
            /* Hide the desktop theme toggle and language switcher from the main header on mobile */
            .header-controls-desktop .theme-toggle-label,
            .header-controls-desktop .desktop-lang-switch-btn {
                display: none;
            }

            /* Show the mobile theme toggle and language buttons inside the mobile menu */
            #mobile-menu-content .theme-toggle-label,
            #mobile-menu-content .language-buttons {
                display: flex; /* Ensure these are visible in the mobile menu */
            }
            #mobile-menu-content .language-buttons {
                flex-direction: column;
                width: 100%;
                gap: 0.5rem;
            }
            #mobile-menu-content .lang-button {
                width: 100%;
                justify-content: flex-start;
                padding-left: 1rem;
            }
            #mobile-menu-content .theme-toggle-label {
                width: 100%;
                justify-content: flex-start;
            }
        }

        /* Show desktop language/theme selectors on larger screens, hide hamburger */
        @media (min-width: 768px) {
            .header-controls-desktop {
                display: flex;
            }
            .menu-container {
                display: none; /* Hide hamburger on desktop */
            }
            #mobile-menu-overlay {
                display: none !important; /* Ensure overlay is hidden */
            }
            /* Hide the mobile theme toggle and language buttons when not in mobile menu */
            #mobile-menu-content .theme-toggle-label,
            #mobile-menu-content .language-buttons {
                display: none;
            }
        }

        /* Desktop language switch button */
        .desktop-lang-switch-btn {
            background-color: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 0.5rem 0.75rem;
            border-radius: 9999px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s ease, transform 0.1s ease;
            font-size: 0.875rem;
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 50px;
        }
        .desktop-lang-switch-btn:hover {
            background-color: rgba(255, 255, 255, 0.3);
            transform: translateY(-1px);
        }
        html.dark .desktop-lang-switch-btn {
            background-color: rgba(0, 0, 0, 0.2);
            color: #d1d5db;
        }
        html.dark .desktop-lang-switch-btn:hover {
            background-color: rgba(0, 0, 0, 0.3);
        }
        .desktop-lang-switch-btn i {
            margin-right: 0.25rem;
        }

        /* Footer copyright text styling */
        footer p {
            word-break: break-word; /* Ensure long text wraps correctly */
        }

        /* Ensure social media icons are visible in footer */
        footer .fab {
            display: inline-block !important;
            font-family: 'Font Awesome 6 Brands' !important; /* Use Brands for fab icons */
            font-weight: 400 !important;
            font-size: 1.5rem !important;
            color: white; /* Ensure icons are white */
        }
        
        footer a {
            display: inline-flex !important;
            align-items: center !important;
            justify-content: center !important;
            width: 2.5rem !important;
            height: 2.5rem !important;
            border-radius: 50% !important;
            background-color: rgba(255, 255, 255, 0.2) !important;
            transition: all 0.3s ease !important;
            text-decoration: none !important; /* Remove underline */
        }
        
        footer a:hover {
            background-color: rgba(255, 255, 255, 0.3) !important;
            transform: translateY(-2px) !important;
        }
        html.dark footer a {
            background-color: rgba(0, 0, 0, 0.2) !important;
        }
        html.dark footer a:hover {
            background-color: rgba(0, 0, 0, 0.3) !important;
        }

        /* Timeline (Roadmap) Styles */
        .timeline {
            position: relative;
            padding-left: 2rem; /* Space for the line and dots */
            margin-left: 0.5rem;
        }
        .timeline::before {
            content: '';
            position: absolute;
            left: 1rem; /* Position the line */
            top: 0;
            bottom: 0;
            width: 4px;
            background-color: var(--gray-line); /* Vertical line color */
            border-radius: 9999px;
            transition: background-color 0.3s ease;
        }
        html.dark .timeline::before {
            background-color: var(--dark-gray-line);
        }
        .timeline-item {
            position: relative;
            margin-bottom: 2rem;
            padding-left: 2rem; /* Space for content after the dot */
        }
        .timeline-dot {
            position: absolute;
            left: 0.5rem; /* Align with the line */
            top: 0.25rem; /* Adjust vertical position */
            width: 16px;
            height: 16px;
            background-color: var(--main-blue); /* Dot color */
            border-radius: 50%;
            border: 3px solid var(--bg); /* Border to make it pop from the line */
            transition: background-color 0.3s ease, border-color 0.3s ease;
            z-index: 1; /* Ensure dot is above the line */
        }
        html.dark .timeline-dot {
            background-color: var(--light-blue);
            border-color: var(--dark-bg-body);
        }
        .timeline-content {
            background-color: #ffffff; /* Card background for light theme */
            border-radius: 0.75rem; /* Rounded corners */
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            padding: 1.25rem;
            margin-left: 1rem; /* Push content slightly right of the dot */
            transition: background-color 0.3s ease, box-shadow 0.3s ease, transform 0.2s ease;
        }
        html.dark .timeline-content {
            background-color: var(--dark-bg-nested-card); /* Darker gray for cards in dark mode */
        }
        .timeline-content:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 10px rgba(0, 0, 0, 0.15);
        }
    </style>
</head>
<body class="antialiased">

    <!-- Preloader -->
    <div id="preloader">
        <svg class="pl" viewBox="0 0 128 128" width="128px" height="128px" xmlns="http://www.w3.org/2000/svg">
            <defs>
                <linearGradient id="pl-grad" x1="0" y1="0" x2="0" y2="1">
                    <stop offset="0%" stop-color="hsl(193,90%,55%)" />
                    <stop offset="100%" stop-color="hsl(223,90%,55%)" />
                </linearGradient>
            </defs>
            <circle class="pl__ring" r="56" cx="64" cy="64" fill="none" stroke="hsla(0,10%,10%,0.1)" stroke-width="16" stroke-linecap="round" />
            <path class="pl__worm" d="M92,15.492S78.194,4.967,66.743,16.887c-17.231,17.938-28.26,96.974-28.26,96.974L119.85,59.892l-99-31.588,57.528,89.832L97.8,19.349,13.636,88.51l89.012,16.015S81.908,38.332,66.1,22.337C50.114,6.156,36,15.492,36,15.492a56,56,0,1,0,56,0Z" fill="none" stroke="url(#pl-grad)" stroke-width="16" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="44 1111" stroke-dashoffset="10" />
        </svg>
        <p class="text-xl font-semibold mt-4" data-translate-key="loading">Yuklanmoqda...</p>
    </div>

    <!-- Language Selection Modal -->
    <div id="language-modal" class="language-modal-overlay">
        <div class="language-modal-content">
            <button class="close-modal-btn" aria-label="Close Language Selection">&times;</button>
            <h2 class="text-2xl font-bold mb-4" data-translate-key="selectLanguagePrompt">Iltimos, sayt tilini tanlang:</h2>
            <div class="flex flex-wrap justify-center gap-2">
                <button data-lang="uz">O'zbekcha</button>
                <button data-lang="ru">Русский</label>
                <button data-lang="en">English</button>
                <button data-lang="tr">Türkçe</button>
            </div>
        </div>
    </div>

    <!-- Main Content Wrapper -->
    <div id="main-content-wrapper">
        <!-- Header Section -->
        <header id="main-header" class="bg-gradient-to-r from-blue-600 to-blue-800 text-white py-12 rounded-b-1x1 shadow-lg dark:from-gray-800 dark:to-gray-900 transition-colors duration-300 relative overflow-hidden">
            <div class="container flex flex-col md:flex-row items-center justify-between text-center md:text-left relative z-10">
                <div class="mb-6 md:mb-0">
                    <h1 class="text-4xl md:text-5xl font-bold mb-2" data-translate-key="portfolioTitle">ATAVULLAYEV KOMRONBEK</h1>
                    <p class="text-xl md:text-2xl font-light" data-translate-key="jobTitle">Turizm Menejeri / Sayohatlar Tashkilotchisi</p>
                </div>
                <!-- Image placeholder in header -->
                <div class="flex-shrink-0 mb-6 md:mb-0 md:ml-8">
                    <img src="https://i.pinimg.com/474x/60/44/d1/6044d10207a79dc795597fd7d198299b.jpg" alt="Komronbek Atavullayev" class="w-24 h-24 rounded-full border-4 border-white shadow-lg object-cover">
                </div>
                
                <!-- Desktop Controls (Theme Toggle and Language Button) -->
                <div class="header-controls-desktop flex flex-col md:flex-row items-center space-y-4 md:space-y-0 md:space-x-4 mt-4 md:mt-0 md:ml-auto">
                    <label for="theme-toggle" class="theme-toggle-label">
                        <input type="checkbox" id="theme-toggle" class="theme-toggle-input">
                        <div class="theme-toggle-slider">
                            <div class="theme-toggle-circle"></div>
                        </div>
                        <div class="theme-toggle-text" data-translate-key="darkMode">
                            Dark Mode
                        </div>
                    </label>
                    <!-- New: Desktop Language Switcher -->
                    <button class="desktop-lang-switch-btn" id="desktop-lang-switch-btn">
                        <i class="fas fa-globe"></i> <span data-translate-key="languageSwitch">Tilni almashtirish</span>
                    </button>
                </div>

                <!-- Hamburger Menu for Mobile -->
                <div class="menu-container md:hidden">
                    <button id="hamburger-toggle-btn" class="flex flex-col justify-around w-8 h-8 bg-transparent border-none cursor:pointer p-0 focus:outline-none">
                        <span class="hamburger-line block w-full h-0.5 bg-white rounded transition-all duration-300 ease-in-out"></span>
                        <span class="hamburger-line block w-full h-0.5 bg-white rounded transition-all duration-300 ease-in-out"></span>
                        <span class="hamburger-line block w-full h-0.5 bg-white rounded transition-all duration-300 ease-in-out"></span>
                    </button>
                </div>
            </div>
            <!-- Real-time clock display -->
            <div id="real-time-clock" class="mt-4 text-center relative z-10"></div>
        </header>

        <!-- Mobile Menu Overlay -->
        <div id="mobile-menu-overlay" class="md:hidden">
            <div id="mobile-menu-content" class="md:hidden">
                <!-- Close button for mobile menu -->
                <button id="mobile-menu-close-btn" class="absolute top-4 right-4 text-2xl font-bold text-gray-600 hover:text-gray-800 dark:text-gray-300 dark:hover:text-gray-100 transition-colors duration-200">
                    &times;
                </button>
                <!-- Mobile Theme Toggle (synced with desktop one) -->
                <label for="theme-toggle-mobile" class="theme-toggle-label">
                    <input type="checkbox" id="theme-toggle-mobile" class="theme-toggle-input">
                    <div class="theme-toggle-slider">
                        <div class="theme-toggle-circle"></div>
                    </div>
                    <div class="theme-toggle-text" data-translate-key="darkMode">
                        Dark Mode
                    </div>
                </label>
                <!-- Language buttons only in mobile menu -->
                <div class="language-buttons flex flex-wrap justify-center space-x-2">
                    <button class="lang-button" data-lang="uz">🇺🇿 UZ</button>
                    <button class="lang-button" data-lang="ru">🇷🇺 RU</button>
                    <button class="lang-button" data-lang="en">🇬🇧 EN</button>
                    <button class="lang-button" data-lang="tr">🇹🇷 TR</button>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <main class="container py-8">

            <!-- About Me Section -->
            <section id="about" class="card">
                <h2 class="text-3xl font-semibold section-title mb-6" data-translate-key="aboutMeTitle">Men haqimda</h2>
                <p class="text-lg leading-relaxed" data-translate-key="aboutMeContent">
                    Men Komronbek Atavullayev, turizm sohasida faoliyat yuritishga intiluvchi, yosh va g'ayratli mutaxassisman. Mijozlarga yuqori sifatli xizmat ko'rsatish, unutilmas sayohat tajribalarini yaratish va tashkiliy jarayonlarni samarali boshqarishga intilaman. Dasturlash va raqamli texnologiyalar bo'yicha bilimlarim sayyohlik veb-platformalari va onlayn xizmatlarni boshqarishda qo'shimcha afzalik beradi. Ko'p tillarni bilishim va mijozlar bilan muloqot qilish ko'nikmalarim bilan har qanday jamoaga tez moslasha olaman.
                </p>
            </section>

            <!-- Skills Section -->
            <section id="skills" class="card">
                <h2 class="text-3xl font-semibold section-title mb-6" data-translate-key="skillsTitle">Ko'nikmalar</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Languages Section -->
                    <div>
                        <div class="collapsible-header" data-target="languages-content">
                            <h3 class="text-xl font-medium" data-translate-key="languagesTitle">Tillar bilimi</h3>
                            <i class="fas fa-chevron-right collapsible-icon text-blue-600 dark:text-blue-300"></i>
                        </div>
                        <div id="languages-content" class="collapsible-content">
                            <div class="flex flex-col">
                                <div class="skill-item">
                                    <div class="flex justify-between items-center mb-1">
                                        <span class="text-lg font-medium" data-translate-key="uzbekLanguage">O'zbek tili (Ona tili)</span>
                                        <span class="text-sm font-semibold text-blue-600 dark:text-blue-300 skill-level-text">100%</span>
                                    </div>
                                    <div class="progress-bar-container-skill">
                                        <div class="progress-bar-skill" data-level="100"></div>
                                    </div>
                                </div>
                                <div class="skill-item">
                                    <div class="flex justify-between items-center mb-1">
                                        <span class="text-lg font-medium" data-translate-key="russianLanguage">Rus tili (Yaxshi)</span>
                                        <span class="text-sm font-semibold text-blue-600 dark:text-blue-300 skill-level-text">85%</span>
                                    </div>
                                    <div class="progress-bar-container-skill">
                                        <div class="progress-bar-skill" data-level="85"></div>
                                    </div>
                                </div>
                                <div class="skill-item">
                                    <div class="flex justify-between items-center mb-1">
                                        <span class="text-lg font-medium" data-translate-key="englishLanguage">Ingliz tili (O'rta)</span>
                                        <span class="text-sm font-semibold text-blue-600 dark:text-blue-300 skill-level-text">60%</span>
                                    </div>
                                    <div class="progress-bar-container-skill">
                                        <div class="progress-bar-skill" data-level="60"></div>
                                    </div>
                                </div>
                                <div class="skill-item">
                                    <div class="flex justify-between items-center mb-1">
                                        <span class="text-lg font-medium" data-translate-key="turkishLanguage">Turk tili (O'rta)</span>
                                        <span class="text-sm font-semibold text-blue-600 dark:text-blue-300 skill-level-text">50%</span>
                                    </div>
                                    <div class="progress-bar-container-skill">
                                        <div class="progress-bar-skill" data-level="50"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Computer Literacy Section -->
                    <div>
                        <div class="collapsible-header" data-target="computer-literacy-content">
                            <h3 class="text-xl font-medium" data-translate-key="computerLiteracyTitle">Kompyuter savodxonligi</h3>
                            <i class="fas fa-chevron-right collapsible-icon text-blue-600 dark:text-blue-300"></i>
                        </div>
                        <div id="computer-literacy-content" class="collapsible-content">
                            <div class="flex flex-col">
                                <div class="skill-item">
                                    <div class="flex justify-between items-center mb-1">
                                        <span class="text-lg font-medium" data-translate-key="msOffice">Microsoft Office</span>
                                        <span class="text-sm font-semibold text-blue-600 dark:text-blue-300 skill-level-text">90%</span>
                                    </div>
                                    <div class="progress-bar-container-skill">
                                        <div class="progress-bar-skill" data-level="90"></div>
                                    </div>
                                </div>
                                <div class="skill-item">
                                    <div class="flex justify-between items-center mb-1">
                                        <span class="text-lg font-medium" data-translate-key="excel">Excel</span>
                                        <span class="text-sm font-semibold text-blue-600 dark:text-blue-300 skill-level-text">80%</span>
                                    </div>
                                    <div class="progress-bar-container-skill">
                                        <div class="progress-bar-skill" data-level="80"></div>
                                    </div>
                                </div>
                                <div class="skill-item">
                                    <div class="flex justify-between items-center mb-1">
                                        <span class="text-lg font-medium" data-translate-key="powerPoint">PowerPoint</span>
                                        <span class="text-sm font-semibold text-blue-600 dark:text-blue-300 skill-level-text">75%</span>
                                    </div>
                                    <div class="progress-bar-container-skill">
                                        <div class="progress-bar-skill" data-level="75"></div>
                                    </div>
                                </div>
                                <div class="skill-item">
                                    <div class="flex justify-between items-center mb-1">
                                        <span class="text-lg font-medium" data-translate-key="windows7">Windows 7</span>
                                        <span class="text-sm font-semibold text-blue-600 dark:text-blue-300 skill-level-text">95%</span>
                                    </div>
                                    <div class="progress-bar-container-skill">
                                        <div class="progress-bar-skill" data-level="95"></div>
                                    </div>
                                </div>
                                <div class="skill-item">
                                    <div class="flex justify-between items-center mb-1">
                                        <span class="text-lg font-medium" data-translate-key="internetEmail">Internet & Email</span>
                                        <span class="text-sm font-semibold text-blue-600 dark:text-blue-300 skill-level-text">90%</span>
                                    </div>
                                    <div class="progress-bar-container-skill">
                                        <div class="progress-bar-skill" data-level="90"></div>
                                    </div>
                                </div>
                                <div class="skill-item">
                                    <div class="flex justify-between items-center mb-1">
                                        <span class="text-lg font-medium" data-translate-key="python">Python</span>
                                        <span class="text-sm font-semibold text-blue-600 dark:text-blue-300 skill-level-text">70%</span>
                                    </div>
                                    <div class="progress-bar-container-skill">
                                        <div class="progress-bar-skill" data-level="70"></div>
                                    </div>
                                </div>
                                <div class="skill-item">
                                    <div class="flex justify-between items-center mb-1">
                                        <span class="text-lg font-medium" data-translate-key="mysql">MySQL</span>
                                        <span class="text-sm font-semibold text-blue-600 dark:text-blue-300 skill-level-text">65%</span>
                                    </div>
                                    <div class="progress-bar-container-skill">
                                        <div class="progress-bar-skill" data-level="65"></div>
                                    </div>
                                </div>
                                <div class="skill-item">
                                    <div class="flex justify-between items-center mb-1">
                                        <span class="text-lg font-medium" data-translate-key="java">Java</span>
                                        <span class="text-sm font-semibold text-blue-600 dark:text-blue-300 skill-level-text">55%</span>
                                    </div>
                                    <div class="progress-bar-container-skill">
                                        <div class="progress-bar-skill" data-level="55"></div>
                                    </div>
                                </div>
                                <div class="skill-item">
                                    <div class="flex justify-between items-center mb-1">
                                        <span class="text-lg font-medium" data-translate-key="css">CSS</span>
                                        <span class="text-sm font-semibold text-blue-600 dark:text-blue-300 skill-level-text">70%</span>
                                        </div>
                                    <div class="progress-bar-container-skill">
                                        <div class="progress-bar-skill" data-level="70"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Personal Qualities Section -->
                <div class="mt-6">
                    <div class="collapsible-header" data-target="personal-qualities-content">
                        <h3 class="text-xl font-medium" data-translate-key="personalQualitiesTitle">Shaxsiy fazilatlar</h3>
                        <i class="fas fa-chevron-right collapsible-icon text-blue-600 dark:text-blue-300"></i>
                    </div>
                    <div id="personal-qualities-content" class="collapsible-content">
                        <div class="flex flex-wrap">
                            <span class="skill-badge" data-translate-key="calmComposed">Sokin va vazmin</span>
                            <span class="skill-badge" data-translate-key="hardworking">Mehnatsevar</span>
                            <span class="skill-badge" data-translate-key="energeticActive">Energetik va faol</span>
                            <span class="skill-badge" data-translate-key="goalOriented">Maqsadga intiluvchan</span>
                            <span class="skill-badge" data-translate-key="customerOriented">Mijozlarga yo'naltirilgan</span>
                            <span class="skill-badge" data-translate-key="organizer">Tashkilotchi</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Experience Section - Timeline -->
            <section id="experience" class="card">
                <h2 class="text-3xl font-semibold section-title mb-6" data-translate-key="experienceTitle">Ish tajribasi</h2>
                <ul class="timeline">
                    <!-- Experience Item 1 -->
                    <li class="timeline-item">
                        <div class="timeline-dot"></div>
                        <div class="timeline-content">
                            <h3 class="text-xl font-medium text-blue-700 dark:text-blue-300" data-translate-key="juniorOperatorRole">Kichik operator</h3>
                            <p class="text-gray-700 dark:text-gray-200" data-translate-key="juniorOperatorCompany">Erieel Oilfield Services Middle East DMCC | 2024 – hozirgi vaqtga qadar</p>
                            <p class="text-gray-700 dark:text-gray-200 text-sm mt-1" data-translate-key="juniorOperatorDescription">Neft-gaz xizmatlari sohasida operatsion jarayonlarni qo'llab-quvvatlash.</p>
                        </div>
                    </li>
                    <!-- Experience Item 2 (Kassir - NEW) -->
                    <li class="timeline-item">
                        <div class="timeline-dot"></div>
                        <div class="timeline-content">
                            <h3 class="text-xl font-medium text-blue-700 dark:text-blue-300" data-translate-key="cashierRole">Kassir</h3>
                            <p class="text-gray-700 dark:text-gray-200" data-translate-key="cashierCompany">FEED UP fast food | 2024</p>
                            <p class="text-gray-700 dark:text-gray-200 text-sm mt-1" data-translate-key="cashierDescription">Mijozlarga xizmat ko'rsatish va kassa operatsiyalarini boshqarish.</p>
                        </div>
                    </li>
                    <!-- Experience Item 3 (Previous Sotuvchi-kassir stajyor) -->
                    <li class="timeline-item">
                        <div class="timeline-dot"></div>
                        <div class="timeline-content">
                            <h3 class="text-xl font-medium text-blue-700 dark:text-blue-300" data-translate-key="salesCashierTraineeRole">Sotuvchi-kassir stajyor</h3>
                            <p class="text-gray-700 dark:text-gray-200" data-translate-key="salesCashierTraineeCompany">„ANGLESEY FOOD“ MAS`ULIYATI CHEKLANGAN JAMIYAT XORIJII KORXONA Korzinka | 2023</p>
                            <p class="text-gray-700 dark:text-gray-200 text-sm mt-1" data-translate-key="salesCashierTraineeDescription">Chakana savdo do'konida savdo va kassa operatsiyalarini o'rganish.</p>
                        </div>
                    </li>
                </ul>
            </section>

            <!-- Education Section -->
            <section id="education" class="card">
                <h2 class="text-3xl font-semibold section-title mb-6" data-translate-key="educationTitle">Ta'lim</h2>

                <div class="mb-6 pb-6 border-b border-gray-200 dark:border-gray-700 last:border-b-0">
                    <h3 class="text-xl font-medium text-blue-700 dark:text-blue-300" data-translate-key="kiutUniversity">Kimyo International University in Tashkent (KIUT)</h3>
                    <p class="text-gray-700 dark:text-gray-200" data-translate-key="kiutYears">2022 – 2026</p>
                    <p class="text-gray-700 dark:text-gray-200 text-sm mt-1" data-translate-key="kiutDetails">Fakultet: Turizm menejmenti, Sirtqi ta'lim, 4-kurs</p>
                </div>

                <div>
                    <h3 class="text-xl font-medium text-blue-700 dark:text-blue-300" data-translate-key="fullstackDeveloper">FULLSTACK DEVELOPER</h3>
                    <p class="text-gray-700 dark:text-gray-200" data-translate-key="napaEduHubYears">NAPA EDU HUB | 2020-2021</p>
                    <p class="text-gray-700 dark:text-gray-200 text-sm mt-1" data-translate-key="napaEduHubDetails">Veb-ishlab chiqish bo'yicha intensiv kurs.</p>
                </div>
            </section>

            <!-- Projects/Portfolio Section -->
            <section id="projects" class="card">
                <h2 class="text-3xl font-semibold section-title mb-6" data-translate-key="projectsTitle">Loyihalar va Portfolio</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Project Item 1 -->
                    <div class="bg-white dark:bg-gray-700 p-6 rounded-lg shadow-inner text-gray-900 dark:text-gray-100">
                        <h3 class="text-xl font-semibold text-blue-700 dark:text-blue-300" data-translate-key="travelWebsitePrototypeTitle">Sayohat Veb-sayti Prototipi</h3>
                        <p class="text-base mb-4" data-translate-key="travelWebsitePrototypeDesc">
                            Mijozlar uchun tur paketlarini bronlash va manzil haqida ma'lumot olish imkonini beruvchi interaktiv veb-sayt prototipi. HTML, CSS va JavaScript yordamida ishlab chiqilgan.
                        </p>
                        <a href="#" class="interactive-button view-project-link" data-translate-key="viewProject">Loyihani ko'rish</a>
                    </div>
                    <!-- Project Item 2 -->
                    <div class="bg-white dark:bg-gray-700 p-6 rounded-lg shadow-inner text-gray-900 dark:text-gray-100">
                        <h3 class="text-xl font-semibold text-blue-700 dark:text-blue-300" data-translate-key="customerDatabaseSoftwareTitle">Mijozlar Baza Dasturi (Kontseptsiya)</h3>
                        <p class="text-base mb-4" data-translate-key="customerDatabaseSoftwareDesc">
                            Turizm kompaniyalari uchun mijozlar ma'lumotlarini, bronlash tarixini va afzalliklarini boshqarishga yordam beradigan MySql asosidagi kontseptual dastur.
                        </p>
                        <a href="#" class="interactive-button view-project-link" data-translate-key="viewProject">Loyihani ko'rish</a>
                    </div>
                    <!-- Add more projects as needed -->
                    <div class="bg-white dark:bg-gray-700 p-6 rounded-lg shadow-inner col-span-full text-center text-gray-900 dark:text-gray-100">
                        <p class="text-gray-900 dark:text-gray-100" data-translate-key="moreProjectsComing">
                            Kelajakda bu yerga ko'proq loyihalar va ishlarim qo'shiladi.
                        </p>
                    </div>
                </div>
            </section>

            <!-- New AdSense Section -->
            <section id="ads-section" class="card">
                <h2 class="text-3xl font-semibold section-title mb-6" data-translate-key="adsTitle">Reklama</h2>
                <div class="flex justify-center items-center p-4 bg-gray-100 dark:bg-gray-700 rounded-lg min-h-[150px]">
                    <!-- Google AdSense tomonidan berilgan reklama blokini bu yerga joylashtiring -->
                    <ins class="adsbygoogle"
                         style="display:block; text-align:center;"
                         data-ad-layout="in-article"
                         data-ad-format="fluid"
                         data-ad-client="ca-pub-2435346542328852"
                         data-ad-slot="YOUR_AD_SLOT_ID_HERE"></ins>
                    <script>
                         (adsbygoogle = window.adsbygoogle || []).push({});
                    </script>
                    <!-- Reklama kontenti bu yerda ko'rsatiladi -->
                </div>
            </section>

            <!-- Contact Section -->
            <section id="contact" class="card">
                <h2 class="text-3xl font-semibold section-title mb-6" data-translate-key="contactTitle">Aloqa</h2>
                <p class="text-lg mb-2 flex flex-wrap items-baseline">
                    <span class="font-medium mr-1" data-translate-key="emailLabel">Elektron pochta:</span> <a href="mailto:kamronatavullayev@gmail.com" class="contact-info-link">kamronatavullayev@gmail.com</a>
                </p>
                <p class="text-lg mb-2">
                    <span class="font-medium" data-translate-key="phoneLabel">Telefon:</span> <a href="tel:+998919549324" class="contact-info-link">+998 91 954 93 24</a>, <a href="tel:+998888223323" class="contact-info-link">+998 88 822 33 23</a>
                </p>
                <p class="text-lg mb-6">
                    <span class="font-medium" data-translate-key="addressLabel">Manzil:</span> <span data-translate-key="addressContent">Qashqadaryo viloyati, Qarshi shahri, Tabassum mahallasi</span>
                </p>

                <!-- Contact Form -->
                <h3 class="text-2xl font-semibold mb-4 text-blue-700 dark:text-blue-300" data-translate-key="contactFormTitle">Menga xabar yuboring</h3>
                <form id="contact-form" class="space-y-4">
                    <div>
                        <label for="contact-name" class="block text-lg font-medium mb-1 text-gray-900 dark:text-gray-100" data-translate-key="contactNameLabel">Ismingiz:</label>
                        <input type="text" id="contact-name" name="name" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 dark:border-gray-600 text-gray-900 dark:text-white" data-translate-key="contactNamePlaceholder" placeholder="Ismingizni kiriting" required>
                    </div>
                    <div>
                        <label for="contact-email" class="block text-lg font-medium mb-1 text-gray-900 dark:text-gray-100" data-translate-key="contactEmailLabel">Elektron pochtangiz:</label>
                        <input type="email" id="contact-email" name="email" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 dark:border-gray-600 text-gray-900 dark:text-white" data-translate-key="contactEmailPlaceholder" placeholder="Sizning elektron pochtangiz" required>
                    </div>
                    <div>
                        <label for="contact-subject" class="block text-lg font-medium mb-1 text-gray-900 dark:text-gray-100" data-translate-key="contactSubjectLabel">Mavzu:</label>
                        <input type="text" id="contact-subject" name="subject" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 dark:border-gray-600 text-gray-900 dark:text-white" data-translate-key="contactSubjectPlaceholder" placeholder="Xabar mavzusi" required>
                    </div>
                    <div>
                        <label for="contact-message" class="block text-lg font-medium mb-1 text-gray-900 dark:text-gray-100" data-translate-key="contactMessageLabel">Xabaringiz:</label>
                        <textarea id="contact-message" name="message" rows="5" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 dark:border-gray-600 text-gray-900 dark:text-white" data-translate-key="contactMessagePlaceholder" placeholder="Xabaringizni yozing..." required></textarea>
                    </div>
                    <button type="submit" id="send-message-btn" class="button-loading px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-600 transition-colors duration-300" data-translate-key="sendMessageBtn" disabled>
                        <span class="submit-text" data-translate-key="sendMessageBtn">Xabar yuborish</span>
                        <span class="loading-icon"><i class="fa fa-refresh"></i></span>
                        <span class="check-icon"><i class="fa fa-check"></i></span>
                    </button>
                    <div id="form-message" class="mt-4 text-center text-lg font-medium"></div>
                </form>
            </section>

        </main>

        <!-- Simple Footer -->
        <footer class="bg-blue-600 dark:bg-gray-800 text-white py-8 text-center transition-colors duration-300 mt-8 relative overflow-hidden">
            <div class="container flex flex-col items-center justify-center relative z-10">
                <p class="text-lg" data-translate-key="copyrightCombined"></p>
                <div class="flex space-x-4 mt-4">
                    <a href="https://www.instagram.com/1.kamronbek.1" target="_blank" class="text-white hover:text-blue-200 transition-colors duration-200" aria-label="Instagram">
                        <i class="fab fa-instagram"></i>
                    </a>
                    <a href="https://wa.me/998330101245" target="_blank" class="text-white hover:text-blue-200 transition-colors duration-200" aria-label="WhatsApp">
                        <i class="fab fa-whatsapp"></i>
                    </a>
                    <a href="https://www.facebook.com/kamronatavullayev3" target="_blank" class="text-white hover:text-blue-200 transition-colors duration-200" aria-label="Facebook">
                        <i class="fab fa-facebook"></i>
                    </a>
                    <a href="https://www.youtube.com/c/ZipNationSongs" target="_blank" class="text-white hover:text-blue-200 transition-colors duration-200" aria-label="YouTube">
                        <i class="fab fa-youtube"></i>
                    </a>
                    <a href="https://t.me/Kamronlife" target="_blank" class="text-white hover:text-blue-200 transition-colors duration-200" aria-label="Telegram">
                        <i class="fab fa-telegram-plane"></i>
                    </a>
                </div>
            </div>
        </footer>
    </div> <!-- End of main-content-wrapper -->

    <!-- 404 Page (Initially Hidden) -->
    <div id="not-found-page" class="fixed inset-0 bg-black text-white flex flex-col items-center justify-center z-50 hidden" style="font-family: Arial, 'Helvetica Neue', Helvetica, sans-serif;">
        <div class="head-404 relative w-52 h-40 mx-auto">
            <div class="meta-404 relative inline-block bg-white w-16 h-20 rounded-full">
                <div class="meta-after-404 absolute border-b-2 border-white w-16 h-12 left-0 bottom-[-10px] rounded-full"></div>
                <div class="meta-before-404 absolute top-[-100px] left:0;"></div>
            </div>
            <div class="meta-404 float-right relative inline-block bg-white w-16 h-20 rounded-full">
                <div class="meta-after-404 absolute border-b-2 border-white w-16 h-12 left-1 bottom-[-10px] rounded-full"></div>
                <div class="meta-before-404 absolute top: -100px; left: 0;"></div>
            </div>
            <div class="eye-404 absolute top-7 left-6"></div>
            <div class="eye-404 absolute top-7 left-[145px]"></div>
        </div>

        <div class="body-404-content mt-24 text-center text-white">
            <div class="error-code text-8xl font-extrabold mb-2" data-translate-key="notFoundTitle">404</div>
            <div class="error-message text-3xl overflow-hidden whitespace-normal inline-block text-[#1EA7AB]" data-translate-key="notFoundMessage">Got lost? How.....? why.....? Ahhhh....</div>
        </div>

        <button id="go-back-from-404" class="mt-10 px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-600 transition-colors duration-300" data-translate-key="goBack">
            Orqaga Qaytish
        </button>
    </div>

    <!-- Scroll Button -->
    <button id="scroll-button" aria-label="Scroll">
        <i class="fas fa-arrow-down" id="scroll-icon"></i>
    </button>

    <script type="module">
        // Firebase imports
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Firebase variables (provided by the Canvas environment)
        // __app_id va __initial_auth_token Canvas muhiti tomonidan taqdim etiladi.
        // Agar ular aniqlanmagan bo'lsa, xatoliklarni oldini olish uchun 'default-app-id' va 'null' ishlatiladi.
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyA3V5xO5qS9T4H9Noc5L86xP4f_nrr6P7I", // User provided API Key
            authDomain: "portfolio-5cd73.firebaseapp.com",
            projectId: "portfolio-5cd73",
            storageBucket: "portfolio-5cd73.firebasestorage.app",
            messagingSenderId: "70297137106",
            appId: "1:70297137106:web:0e2e3de2fe28644345620b",
            measurementId: "G-JYQ96HYH6C"
        };

        // Initialize Firebase
        let app;
        let db;
        let auth;
        let userId = null; // Joriy foydalanuvchi ID'sini saqlash uchun
        let firebaseReady = false; // Firebase ishga tushganligini kuzatish uchun bayro

        // Translations object
        const translations = {
            uz: {
                portfolioTitle: "ATAVULLAYEV KOMRONBEK",
                jobTitle: "Turizm Menejeri / Sayohatlar Tashkilotchisi",
                loading: "Yuklanmoqda...",
                darkMode: "Dark Mode",
                aboutMeTitle: "Men haqimda",
                aboutMeContent: "Men Komronbek Atavullayev, turizm sohasida faoliyat yuritishga intiluvchi, yosh va g'ayratli mutaxassisman. Mijozlarga yuqori sifatli xizmat ko'rsatish, unutilmas sayohat tajribalarini yaratish va tashkiliy jarayonlarni samarali boshqarishga intilaman. Dasturlash va raqamli texnologiyalar bo'yicha bilimlarim sayyohlik veb-platformalari va onlayn xizmatlarni boshqarishda qo'shimcha afzalik beradi. Ko'p tillarni bilishim va mijozlar bilan muloqot qilish ko'nikmalarim bilan har qanday jamoaga tez moslasha olaman.",
                skillsTitle: "Ko'nikmalar",
                languagesTitle: "Tillar bilimi",
                uzbekLanguage: "O'zbek tili (Ona tili)",
                russianLanguage: "Rus tili (Yaxshi)",
                englishLanguage: "Ingliz tili (O'rta)",
                turkishLanguage: "Turk tili (O'rta)",
                computerLiteracyTitle: "Kompyuter savodxonligi",
                msOffice: "Microsoft Office",
                excel: "Excel",
                powerPoint: "PowerPoint",
                windows7: "Windows 7",
                internetEmail: "Internet & Email",
                python: "Python",
                mysql: "MySQL",
                java: "Java",
                css: "CSS",
                personalQualitiesTitle: "Shaxsiy fazilatlar",
                calmComposed: "Sokin va vazmin",
                hardworking: "Mehnatsevar",
                energeticActive: "Energetik va faol",
                goalOriented: "Maqsadga intiluvchan",
                customerOriented: "Mijozlarga yo'naltirilgan",
                organizer: "Tashkilotchi",
                experienceTitle: "Ish tajribasi",
                juniorOperatorRole: "Kichik operator",
                juniorOperatorCompany: "Erieel Oilfield Services Middle East DMCC | 2024 – hozirgi vaqtga qadar",
                juniorOperatorDescription: "Neft-gaz xizmatlari sohasida operatsion jarayonlarni qo'llab-quvvatlash.",
                cashierRole: "Kassir",
                cashierCompany: "FEED UP fast food | 2024",
                cashierDescription: "Mijozlarga xizmat ko'rsatish va kassa operatsiyalarini boshqarish.",
                salesCashierTraineeRole: "Sotuvchi-kassir stajyor",
                salesCashierTraineeCompany: "„ANGLESEY FOOD“ MAS`ULIYATI CHEKLANGAN JAMIYAT XORIJII KORXONA Korzinka | 2023",
                salesCashierTraineeDescription: "Chakana savdo do'konida savdo va kassa operatsiyalarini o'rganish.",
                educationTitle: "Ta'lim",
                kiutUniversity: "Kimyo International University in Tashkent (KIUT)",
                kiutYears: "2022 – 2026",
                kiutDetails: "Fakultet: Turizm menejmenti, Sirtqi ta'lim, 4-kurs",
                fullstackDeveloper: "FULLSTACK DEVELOPER",
                napaEduHubYears: "NAPA EDU HUB | 2020-2021",
                napaEduHubDetails: "Veb-ishlab chiqish bo'yicha intensiv kurs.",
                projectsTitle: "Loyihalar va Portfolio",
                travelWebsitePrototypeTitle: "Sayohat Veb-sayti Prototipi",
                travelWebsitePrototypeDesc: "Mijozlar uchun tur paketlarini bronlash va manzil haqida ma'lumot olish imkonini beruvchi interaktiv veb-sayt prototipi. HTML, CSS va JavaScript yordamida ishlab chiqilgan.",
                viewProject: "Loyihani ko'rish",
                customerDatabaseSoftwareTitle: "Mijozlar Baza Dasturi (Kontseptsiya)",
                customerDatabaseSoftwareDesc: "Turizm kompaniyalari uchun mijozlar ma'lumotlarini, bronlash tarixini va afzalliklarini boshqarishga yordam beradigan MySql asosidagi kontseptual dastur.",
                moreProjectsComing: "Kelajakda bu yerga ko'proq loyihalar va ishlarim qo'shiladi.",
                adsTitle: "Reklama",
                adsPopupMessage: "Sayohatlaringiz uchun eng yaxshi takliflar!",
                adsPlaceholder: "Google Ads Banner (Reklama)",
                contactTitle: "Aloqa",
                emailLabel: "Elektron pochta:",
                phoneLabel: "Telefon:",
                addressLabel: "Manzil:",
                addressContent: "Qashqadaryo viloyati, Qarshi shahri, Tabassum mahallasi",
                copyrightCombined: "© 2025 v7.7.7-ZZZ RELEASED WITH LOVE ❤️ KOMRONBEK ATAVULLAYEV. Barcha huquqlar himoyalangan.",
                backToTop: "Yuqoriga qaytish",
                goBack: "Orqaga Qaytish",
                contactFormTitle: "Menga xabar yuboring",
                contactNameLabel: "Ismingiz:",
                contactNamePlaceholder: "Ismingizni kiriting",
                contactEmailLabel: "Elektron pochtangiz:",
                contactEmailPlaceholder: "Sizning elektron pochtangiz",
                contactSubjectLabel: "Mavzu:",
                contactSubjectPlaceholder: "Xabar mavzusi",
                contactMessageLabel: "Xabaringiz:",
                contactMessagePlaceholder: "Xabaringizni yozing...",
                sendMessageBtn: "Xabar yuborish",
                formSubmittedSuccess: "Xabaringiz muvaffaqiyatli yuborildi! Tez orada siz bilan bog'lanamiz.",
                formSubmissionError: "Xabar yuborishda xatolik yuz berdi. Iltimos, qayta urinib ko'ring.",
                firebaseNotReady: "Firebase tayyor emas. Iltimos, sahifani yangilab ko'ring.",
                firebaseConfigMissing: "Firebase konfiguratsiyasi to'g'ridan-to'g'ri kodga kiritilgan. Agar muammo davom etsa, iltimos, konfiguratsiyani tekshiring.",
                nameRequired: "Ismingizni kiriting.",
                emailRequired: "Elektron pochtangizni kiriting.",
                emailInvalid: "Noto'g'ri elektron pochta manzili.",
                subjectRequired: "Mavzuni kiriting.",
                messageRequired: "Xabaringizni kiriting.",
                chooseLanguage: "Tilni tanlang",
                selectLanguagePrompt: "Iltimos, sayt tilini tanlang:",
                languageSelectionConfirm: "Tanlash",
                // 404 page
                notFoundTitle: "404 Sahifa topilmadi",
                notFoundMessage: "Adashib qoldingizmi? Qanday.....? Nega.....? Ahhhh....",
                // Navbar language switcher
                languageSwitch: "Tilni almashtirish",
                firebaseAuthBlocked: "Firebase autentifikatsiya xatosi: Autentifikatsiya usuli bloklangan. Iltimos, Firebase konsolingizda 'Authentication' bo'limiga o'ting va kerakli kirish usullarini (masalan, 'Anonymous' yoki 'Email/Password') yoqing.",
                realTimeClockLabel: "Hozirgi vaqt: ",
                tashkentLabel: "Toshkent",
                moscowLabel: "Moskva",
                londonLabel: "London",
                istanbulLabel: "Istanbul"
            },
            ru: {
                portfolioTitle: "АТАВУЛЛАЕВ КОМРОНБЕК",
                jobTitle: "Менеджер по туризму / Организатор путешествий",
                loading: "Загрузка...",
                darkMode: "Темный режим",
                aboutMeTitle: "Обо мне",
                aboutMeContent: "Я Комронбек Атавуллаев, молодой и энергичный специалист, стремящийся работать в сфере туризма. Я стремлюсь предоставлять высококачественные услуги клиентам, создавать незабываемые впечатления от путешествий и эффективно управлять организационными процессами. Мои знания в области программирования и цифровых технологий дают мне дополнительное преимущество в управлении туристическими веб-платформами и онлайн-сервисами. Благодаря знанию нескольких языков и навыкам общения с клиентами я могу быстро адаптироваться к любой команде.",
                skillsTitle: "Навыки",
                languagesTitle: "Знание языков",
                uzbekLanguage: "Узбекский язык (Родной)",
                russianLanguage: "Русский язык (Хорошо)",
                englishLanguage: "Английский язык (Средний)",
                turkishLanguage: "Турецкий язык (Средний)",
                computerLiteracyTitle: "Компьютерная грамотность",
                msOffice: "Microsoft Office",
                excel: "Excel",
                powerPoint: "PowerPoint",
                windows7: "Windows 7",
                internetEmail: "Интернет и электронная почта",
                python: "Python",
                mysql: "MySQL",
                java: "Java",
                css: "CSS",
                personalQualitiesTitle: "Личные качества",
                calmComposed: "Спокойный и уравновешенный",
                hardworking: "Трудолюбивый",
                energeticActive: "Энергичный и активный",
                goalOriented: "Целеустремленный",
                customerOriented: "Ориентированный на клиента",
                organizer: "Организатор",
                experienceTitle: "Опыт работы",
                juniorOperatorRole: "Младший оператор",
                juniorOperatorCompany: "Erieel Oilfield Services Middle East DMCC | 2024 – по настоящее время",
                juniorOperatorDescription: "Поддержка операционных процессов в сфере нефтегазовых услуг.",
                cashierRole: "Кассир",
                cashierCompany: "FEED UP fast food | 2024",
                cashierDescription: "Обслуживание клиентов и управление кассовыми операциями.",
                salesCashierTraineeRole: "Стажер продавец-кассир",
                salesCashierTraineeCompany: "„ANGLESEY FOOD“ MAS`ULIYATI CHEKLЕННОЙ JAMIYAT XORIJII KORXONA Korzinka | 2023",
                salesCashierTraineeDescription: "Обучение продажам и кассовым операциям в розничном магазине.",
                educationTitle: "Образование",
                kiutUniversity: "Международный университет Кимё в Ташкенте (КИУТ)",
                kiutYears: "2022 – 2026",
                kiutDetails: "Факультет: Туризм менеджмент, Заочное обучение, 4-й курс",
                fullstackDeveloper: "FULLSTACK DEVELOPER",
                napaEduHubYears: "NAPA EDU HUB | 2020-2021",
                napaEduHubDetails: "Интенсивный курс по веб-разработке.",
                projectsTitle: "Проекты и портфолио",
                travelWebsitePrototypeTitle: "Прототип туристического веб-сайта",
                travelWebsitePrototypeDesc: "Интерактивный прототип веб-сайта, позволяющий клиентам бронировать туристические пакеты и получать информацию о направлениях. Разработан с использованием HTML, CSS и JavaScript.",
                viewProject: "Посмотреть проект",
                customerDatabaseSoftwareTitle: "Программа базы данных клиентов (Концепция)",
                customerDatabaseDesc: "Концептуальная программа на основе MySQL, помогающая туристическим компаниям управлять данными клиентов, историей бронирований и предпочтениями.",
                moreProjectsComing: "В будущем здесь будет добавлено больше проектов и моих работ.",
                adsTitle: "Реклама",
                adsPopupMessage: "Лучшие предложения для ваших путешествий!",
                adsPlaceholder: "Баннер Google Ads (Реклама)",
                contactTitle: "Контакты",
                emailLabel: "Электронная почта:",
                phoneLabel: "Телефон:",
                addressLabel: "Адрес:",
                addressContent: "Кашкадарьинская область, город Карши, махалля Табассум",
                copyrightCombined: "© 2025 v7.7.7-ZZZ RELEASED WITH LOVE ❤️ КОМРОНБЕК АТАВУЛЛАЕВ. Все права защищены.",
                backToTop: "Вернуться наверх",
                goBack: "Вернуться назад",
                contactFormTitle: "Отправить мне сообщение",
                contactNameLabel: "Ваше имя:",
                contactNamePlaceholder: "Введите ваше имя",
                contactEmailLabel: "Ваша электронная почта:",
                contactEmailPlaceholder: "Ваша электронная почта",
                contactSubjectLabel: "Тема:",
                contactSubjectPlaceholder: "Тема сообщения",
                contactMessageLabel: "Ваше сообщение:",
                contactMessagePlaceholder: "Напишите ваше сообщение...",
                sendMessageBtn: "Отправить сообщение",
                formSubmittedSuccess: "Ваше сообщение успешно отправлено! Мы свяжемся с вами в ближайшее время.",
                formSubmissionError: "Произошла ошибка при отправке сообщения. Пожалуйста, попробуйте еще раз.",
                firebaseNotReady: "Произошла ошибка при отправке сообщения. Firebase не готов. Пожалуйста, обновите страницу.",
                firebaseConfigMissing: "Конфигурация Firebase напрямую встроена в код. Если проблема не исчезнет, пожалуйста, проверьте конфигурацию.",
                nameRequired: "Пожалуйста, введите ваше имя.",
                emailRequired: "Пожалуйста, введите ваш адрес электронной почты.",
                emailInvalid: "Неверный адрес электронной почты.",
                subjectRequired: "Пожалуйста, введите тему.",
                messageRequired: "Пожалуйста, введите ваше сообщение.",
                chooseLanguage: "Выберите язык",
                selectLanguagePrompt: "Пожалуйста, выберите язык сайта:",
                languageSelectionConfirm: "Выбрать",
                // 404 page
                notFoundTitle: "404 Страница не найдена",
                notFoundMessage: "Заблудились? Как.....? Почему.....? Ааааа....",
                // Navbar language switcher
                languageSwitch: "Изменить язык",
                firebaseAuthBlocked: "Ошибка аутентификации Firebase: Метод аутентификации заблокирован. Пожалуйста, перейдите в раздел 'Authentication' в вашей консоли Firebase и включите необходимые методы входа (например, 'Anonymous' или 'Email/Password').",
                realTimeClockLabel: "Текущее время: ",
                tashkentLabel: "Ташкент",
                moscowLabel: "Москва",
                londonLabel: "Лондон",
                istanbulLabel: "Стамбул"
            },
            en: {
                portfolioTitle: "ATAVULLAYEV KOMRONBEK",
                jobTitle: "Tourism Manager / Travel Organizer",
                loading: "Loading...",
                darkMode: "Dark Mode",
                aboutMeTitle: "About Me",
                aboutMeContent: "I am Komronbek Atavullayev, a young and energetic specialist aspiring to work in the tourism sector. I strive to provide high-quality service to clients, create unforgettable travel experiences, and efficiently manage organizational processes. My knowledge in programming and digital technologies gives me an additional advantage in managing tourism web platforms and online services. With my multilingual skills and customer communication abilities, I can quickly adapt to any team.",
                skillsTitle: "Skills",
                languagesTitle: "Language Proficiency",
                uzbekLanguage: "Uzbek (Native)",
                russianLanguage: "Russian (Good)",
                englishLanguage: "English (Intermediate)",
                turkishLanguage: "Turkish (Intermediate)",
                computerLiteracyTitle: "Computer Literacy",
                msOffice: "Microsoft Office",
                excel: "Excel",
                powerPoint: "PowerPoint",
                windows7: "Windows 7",
                internetEmail: "Internet & Email",
                python: "Python",
                mysql: "MySQL",
                java: "Java",
                css: "CSS",
                personalQualitiesTitle: "Personal Qualities",
                calmComposed: "Calm and Composed",
                hardworking: "Hardworking",
                energeticActive: "Energetic and Active",
                goalOriented: "Goal-Oriented",
                customerOriented: "Customer-Oriented",
                organizer: "Organizer",
                experienceTitle: "Work Experience",
                juniorOperatorRole: "Junior Operator",
                juniorOperatorCompany: "Erieel Oilfield Services Middle East DMCC | 2024 – Present",
                juniorOperatorDescription: "Supporting operational processes in the oil and gas services sector.",
                cashierRole: "Cashier",
                cashierCompany: "FEED UP fast food | 2024",
                cashierDescription: "Serving customers and managing cash operations.",
                salesCashierTraineeRole: "Sales Cashier Trainee",
                salesCashierTraineeCompany: "„ANGLESEY FOOD“ MAS`ULIYATI CHEKLANGAN JAMIYAT XORIJII KORXONA Korzinka | 2023",
                salesCashierTraineeDescription: "Learning sales and cash operations in a retail store.",
                educationTitle: "Education",
                kiutUniversity: "Kimyo International University in Tashkent (KIUT)",
                kiutYears: "2022 – 2026",
                kiutDetails: "Faculty: Tourism Management, Extramural education, 4th year",
                fullstackDeveloper: "FULLSTACK DEVELOPER",
                napaEduHubYears: "NAPA EDU HUB | 2020-2021",
                napaEduHubDetails: "Intensive course in web development.",
                projectsTitle: "Projects & Portfolio",
                travelWebsitePrototypeTitle: "Travel Website Prototype",
                travelWebsitePrototypeDesc: "An interactive website prototype allowing clients to book tour packages and get information about destinations. Developed using HTML, CSS, and JavaScript.",
                viewProject: "View Project",
                customerDatabaseSoftwareTitle: "Customer Database Software (Concept)",
                customerDatabaseDesc: "A conceptual MySQL-based software to help tourism companies manage customer data, booking history, and preferences.",
                moreProjectsComing: "More projects and my work will be added here in the future.",
                adsTitle: "Ads",
                adsPopupMessage: "Best offers for your travels!",
                adsPlaceholder: "Google Ads Banner (Advertisement)",
                contactTitle: "Contact",
                emailLabel: "Email:",
                phoneLabel: "Phone:",
                addressLabel: "Address:",
                addressContent: "Kashkadarya region, Karshi city, Tabassum mahalla",
                copyrightCombined: "© 2025 v7.7.7-ZZZ RELEASED WITH LOVE ❤️ KOMRONBEK ATAVULLAYEV. All rights reserved.",
                backToTop: "Back to Top",
                goBack: "Go Back",
                contactFormTitle: "Send me a message",
                contactNameLabel: "Your Name:",
                contactNamePlaceholder: "Enter your name",
                contactEmailLabel: "Your Email:",
                contactEmailPlaceholder: "Your email address",
                contactSubjectLabel: "Subject:",
                contactSubjectPlaceholder: "Subject of your message",
                contactMessageLabel: "Your Message:",
                contactMessagePlaceholder: "Write your message...",
                sendMessageBtn: "Send Message",
                formSubmittedSuccess: "Your message has been sent successfully! We will contact you shortly.",
                formSubmissionError: "An error occurred while sending your message. Please try again.",
                firebaseNotReady: "An error occurred while sending your message. Firebase is not ready. Please refresh the page.",
                firebaseConfigMissing: "Firebase configuration is directly embedded in the code. If the issue persists, please check the configuration.",
                nameRequired: "Please enter your name.",
                emailRequired: "Please enter your email address.",
                emailInvalid: "Invalid email address.",
                subjectRequired: "Please enter a subject.",
                messageRequired: "Please enter your message.",
                chooseLanguage: "Choose Language",
                selectLanguagePrompt: "Please select the website language:",
                languageSelectionConfirm: "Select",
                // 404 page
                notFoundTitle: "404 Page Not Found",
                notFoundMessage: "Got lost? How.....? why.....? Ahhhh....",
                // Navbar language switcher
                languageSwitch: "Change Language",
                firebaseAuthBlocked: "Firebase authentication error: Authentication method is blocked. Please go to the 'Authentication' section in your Firebase console and enable the necessary sign-in methods (e.g., 'Anonymous' or 'Email/Password').",
                realTimeClockLabel: "Current Time: ",
                tashkentLabel: "Tashkent",
                moscowLabel: "Moscow",
                londonLabel: "London",
                istanbulLabel: "Istanbul"
            },
            tr: {
                portfolioTitle: "ATAVULLAYEV KOMRONBEK",
                jobTitle: "Turizm Yöneticisi / Seyahat Organizatörü",
                loading: "Yükleniyor...",
                darkMode: "Karanlık Mod",
                aboutMeTitle: "Hakkımda",
                aboutMeContent: "Ben Komronbek Atavullayev, turizm sektöründe çalışmaya hevesli, genç ve enerjik bir uzmanım. Müşterilere yüksek kaliteli hizmet sunmaya, unutulmaz seyahat deneyimleri yaratmaya ve organizasyonel süreçleri verimli bir şekilde yönetmeye çalışıyorum. Programlama ve dijital teknolojilerdeki bilgim, turizm web platformlarını ve çevrimiçi hizmetleri yönetmede bana ek avantaj sağlıyor. Birkaç dil bilmem ve müşteri iletişim becerilerim sayesinde her türlü ekibe hızlıca uyum sağlayabilirim.",
                skillsTitle: "Beceriler",
                languagesTitle: "Dil Yeterliliği",
                uzbekLanguage: "Özbekçe (Ana Dil)",
                russianLanguage: "Rusça (İyi)",
                englishLanguage: "İngilizce (Orta)",
                turkishLanguage: "Türkçe (Orta)",
                computerLiteracyTitle: "Bilgisayar Okuryazarlığı",
                msOffice: "Microsoft Office",
                excel: "Excel",
                powerPoint: "PowerPoint",
                windows7: "Windows 7",
                internetEmail: "İnternet ve E-posta",
                python: "Python",
                mysql: "MySQL",
                java: "Java",
                css: "CSS",
                personalQualitiesTitle: "Kişisel Nitelikler",
                calmComposed: "Sakin ve Dengeli",
                hardworking: "Çalışkan",
                energeticActive: "Enerjik ve Aktif",
                goalOriented: "Hedef Odaklı",
                customerOriented: "Müşteri Odaklı",
                organizer: "Organizatör",
                experienceTitle: "İş Deneyimi",
                juniorOperatorRole: "Junior Operatör",
                juniorOperatorCompany: "Erieel Oilfield Services Middle East DMCC | 2024 – Günümüz",
                juniorOperatorDescription: "Petrol ve gaz hizmetleri sektöründe operasyonel süreçleri desteklemek.",
                cashierRole: "Kasiyer",
                cashierCompany: "FEED UP fast food | 2024",
                cashierDescription: "Müşteri hizmetleri ve kasa işlemlerini yönetmek.",
                salesCashierTraineeRole: "Satış Kasiyer Stajyeri",
                salesCashierTraineeCompany: "„ANGLESEY FOOD“ MAS`ULİYATI CHEKLANGAN JAMIYAT XORIJII KORXONA Korzinka | 2023",
                salesCashierTraineeDescription: "Perakende mağazasında satış ve kasa işlemlerini öğrenmek.",
                educationTitle: "Eğitim",
                kiutUniversity: "Taşkent Kimyo Uluslararası Üniversitesi (KIUT)",
                kiutYears: "2022 – 2026",
                kiutDetails: "Fakülte: Turizm Yönetimi, Uzaktan eğitim, 4. sınıf",
                fullstackDeveloper: "FULLSTACK DEVELOPER",
                napaEduHubYears: "NAPA EDU HUB | 2020-2021",
                napaEduHubDetails: "Web geliştirme üzerine yoğun kurs.",
                projectsTitle: "Projeler ve Portföy",
                travelWebsitePrototypeTitle: "Seyahat Web Sitesi Prototipi",
                travelWebsitePrototypeDesc: "Müşterilerin tur paketlerini rezerve etmelerine ve destinasyon hakkında bilgi almalarına olanak tanıyan etkileşimli bir web sitesi prototipi. HTML, CSS ve JavaScript kullanılarak geliştirilmiştir.",
                viewProject: "Projeyi Görüntüle",
                customerDatabaseSoftwareTitle: "Müşteri Veritabanı Yazılımı (Konsept)",
                customerDatabaseDesc: "Turizm şirketlerinin müşteri verilerini, rezervasyon geçmişini ve tercihlerini yönetmelerine yardımcı olan MySQL tabanlı kavramsal bir yazılım.",
                moreProjectsComing: "Gelecekde buraya daha fazla proje ve çalışmam eklenecektir.",
                adsTitle: "Reklam",
                adsPopupMessage: "Seyahatleriniz uchun eng yaxshi takliflar!",
                adsPlaceholder: "Google Ads Banner (Reklama)",
                contactTitle: "İletişim",
                emailLabel: "E-posta:",
                phoneLabel: "Telefon:",
                addressLabel: "Adres:",
                addressContent: "Kaşkaderya bölgesi, Karşı şehri, Tabassum mahallesi",
                copyrightCombined: "© 2025 v7.7.7-ZZZ RELEASED WITH LOVE ❤️ KOMRONBEK ATAVULLAYEV. Tüm hakları saklıdır.",
                backToTop: "Yukarı Çık",
                goBack: "Geri Dön",
                contactFormTitle: "Bana mesaj gönder",
                contactNameLabel: "Adınız:",
                contactNamePlaceholder: "Adınızı girin",
                contactEmailLabel: "E-postanız:",
                contactEmailPlaceholder: "E-posta adresiniz",
                contactSubjectLabel: "Konu:",
                contactSubjectPlaceholder: "Mesajınızın konusu",
                contactMessageLabel: "Mesajınız:",
                contactMessagePlaceholder: "Mesajınızı yazın...",
                sendMessageBtn: "Mesaj Gönder",
                formSubmittedSuccess: "Mesajınız başarıyla gönderildi! Yakında sizinle iletişime geçeceğiz.",
                formSubmissionError: "Mesaj gönderilirken bir hata oluştu. Lütfen tekrar deneyin.",
                firebaseNotReady: "Firebase konfiguratsiyasi to'g'ridan-to'g'ri kodga kiritilgan. Sorun devam ederse, lütfen yapılandırmayı kontrol edin.",
                nameRequired: "Lütfen adınızı girin.",
                emailRequired: "Lütfen e-posta adresinizi girin.",
                emailInvalid: "Geçersiz e-posta adresi.",
                subjectRequired: "Lütfen konuyu girin.",
                messageRequired: "Lütfen mesajınızı girin.",
                chooseLanguage: "Dil Seç",
                selectLanguagePrompt: "Lütfen site dilini seçin:",
                languageSelectionConfirm: "Seç",
                // 404 page
                notFoundTitle: "404 Sayfa Bulunamadı",
                notFoundMessage: "Kayboldunuz mi? Nasıl.....? Neden.....? Ahhhh....",
                // Navbar language switcher
                languageSwitch: "Dili Değiştir",
                firebaseAuthBlocked: "Firebase kimlik doğrulama hatası: Kimlik doğrulama yöntemi engellendi. Lütfen Firebase konsolunuzdaki 'Kimlik Doğrulama' bölümüne giting va kerakli oturum açma yöntemlerini (örneğin, 'Anonim' yoki 'E-posta/Şifre') etkinleştirin.",
                realTimeClockLabel: "Mevcut Saat: ",
                tashkentLabel: "İstanbul", // Changed to Istanbul for TR
                moscowLabel: "Moskova",
                londonLabel: "Londra",
                istanbulLabel: "İstanbul"
            }
        };

        let currentLanguage = localStorage.getItem('language') || 'uz'; // Default to Uzbek
        let scrollAnimationId = null; // To store the requestAnimationFrame ID for scroll animation

        // Function to apply translations
        function applyTranslations(lang) {
            document.documentElement.lang = lang; // Set HTML lang attribute
            currentLanguage = lang;
            const elements = document.querySelectorAll('[data-translate-key]');
            elements.forEach(element => {
                const key = element.getAttribute('data-translate-key');
                let translatedText = translations[lang][key];

                // Handle special cases for placeholders
                if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                    element.placeholder = translatedText;
                } else if (element.tagName === 'TITLE') {
                    document.title = translatedText;
                } else {
                    element.textContent = translatedText;
                }
            });
            // Update specific hardcoded texts if necessary (like skill percentages if they were dynamic)
            document.querySelectorAll('.skill-level-text').forEach(span => {
                // Corrected line: Traverse up to .skill-item and then query for .progress-bar-skill
                const progressBar = span.closest('.skill-item').querySelector('.progress-bar-skill');
                if (progressBar) { // Ensure progressBar is not null before accessing dataset
                    const level = progressBar.dataset.level;
                    span.textContent = `${level}%`;
                } else {
                    console.warn("Could not find .progress-bar-skill for a skill-level-text span.");
                }
            });

            // Update real-time clock label if it exists
            const clockElement = document.getElementById('real-time-clock');
            if (clockElement) {
                updateClock(); // Call updateClock to immediately apply new language format
            }

            // Update active language button state for mobile menu
            document.querySelectorAll('#mobile-menu-content .lang-button').forEach(button => {
                if (button.dataset.lang === currentLanguage) {
                    button.classList.add('active-lang');
                } else {
                    button.classList.remove('active-lang');
                }
            });
        }

        // Theme Toggle Logic
        const htmlElement = document.documentElement; 
        // These will be defined inside DOMContentLoaded where the elements are guaranteed to exist
        let themeToggleCheckboxDesktop;
        let themeToggleCheckboxMobile;


        // Function to set theme based on localStorage or default
        function setThemeFromLocalStorage() {
            const currentTheme = localStorage.getItem('theme');
            if (currentTheme === 'dark') {
                htmlElement.classList.add('dark');
                if (themeToggleCheckboxDesktop) themeToggleCheckboxDesktop.checked = true;
                if (themeToggleCheckboxMobile) themeToggleCheckboxMobile.checked = true;
            } else {
                htmlElement.classList.remove('dark');
                if (themeToggleCheckboxDesktop) themeToggleCheckboxDesktop.checked = false;
                if (themeToggleCheckboxMobile) themeToggleCheckboxMobile.checked = false;
            }
        }

        // Function to animate skill progress bars for a specific section
        function animateSkillBarsForSection(sectionId) {
            const section = document.getElementById(sectionId);
            if (section && section.classList.contains('expanded')) {
                section.querySelectorAll('.progress-bar-skill').forEach(bar => {
                    const level = bar.dataset.level;
                    // Reset width to 0 first to re-trigger animation if section is collapsed and re-expanded
                    bar.style.width = '0%';
                    setTimeout(() => {
                        bar.style.width = `${level}%`;
                    }, 100); // Small delay to allow reset to take effect
                });
            }
        }

        // Function to manage button states (initial, loading, finished)
        function setButtonState(buttonElement, state) {
            buttonElement.classList.remove('active', 'finished');

            const submitText = buttonElement.querySelector('.submit-text');
            const loadingIcon = buttonElement.querySelector('.loading-icon');
            const checkIcon = buttonElement.querySelector('.check-icon');

            if (state === 'loading') {
                buttonElement.classList.add('active');
                if (submitText) submitText.style.display = 'none';
                if (loadingIcon) loadingIcon.style.display = 'block';
                if (checkIcon) checkIcon.style.display = 'none';
                buttonElement.disabled = true;
            } else if (state === 'finished') {
                buttonElement.classList.add('finished');
                if (submitText) submitText.style.display = 'none';
                if (loadingIcon) loadingIcon.style.display = 'none';
                if (checkIcon) checkIcon.style.display = 'block';
                buttonElement.disabled = false;
            } else { // 'initial' or error state
                if (submitText) submitText.style.display = 'block';
                if (loadingIcon) loadingIcon.style.display = 'none';
                if (checkIcon) checkIcon.style.display = 'none';
                buttonElement.disabled = false;
            }
        }

        // Function to update the real-time clock
        function updateClock() {
            const now = new Date();
            const clockElement = document.getElementById('real-time-clock');
            if (!clockElement) return;

            let uzbekTimeOptions = {
                year: 'numeric', month: 'numeric', day: 'numeric',
                hour: '2-digit', minute: '2-digit', second: '2-digit',
                hour12: false, // 24-hour format for consistency with UZ
                timeZone: 'Asia/Tashkent'
            };
            const uzbekTime = now.toLocaleString('uz-UZ', uzbekTimeOptions); // Use uz-UZ locale for Uzbek formatting

            let otherTime = '';
            let otherTimeZone = '';
            let otherLocale = '';
            let otherTimeLabel = '';

            switch (currentLanguage) {
                case 'ru':
                    otherTimeZone = 'Europe/Moscow';
                    otherLocale = 'ru-RU';
                    otherTimeLabel = translations[currentLanguage].moscowLabel;
                    break;
                case 'en':
                    otherTimeZone = 'Europe/London';
                    otherLocale = 'en-GB'; // Use en-GB for UK English
                    otherTimeLabel = translations[currentLanguage].londonLabel;
                    break;
                case 'tr':
                    otherTimeZone = 'Europe/Istanbul';
                    otherLocale = 'tr-TR';
                    otherTimeLabel = translations[currentLanguage].istanbulLabel;
                    break;
                default: // uzbek or any other unhandled language
                    otherTimeZone = 'Asia/Tashkent'; // Fallback to Tashkent
                    otherLocale = 'uz-UZ';
                    otherTimeLabel = translations[currentLanguage].tashkentLabel;
                    break;
            }

            let otherTimeOptions = {
                year: 'numeric', month: 'numeric', day: 'numeric',
                hour: '2-digit', minute: '2-digit', second: '2-digit',
                hour12: (currentLanguage === 'en'), // 12-hour for English, 24-hour otherwise
                timeZone: otherTimeZone
            };

            const formattedOtherTime = now.toLocaleString(otherLocale, otherTimeOptions);

            let displayString = `${translations[currentLanguage].realTimeClockLabel} ${translations[currentLanguage].tashkentLabel}: ${uzbekTime}`;

            // Only add the second time if it's different from Tashkent time
            if (otherTimeZone !== 'Asia/Tashkent') {
                displayString += ` | ${otherTimeLabel}: ${formattedOtherTime}`;
            }

            clockElement.textContent = displayString;
        }

        document.addEventListener('DOMContentLoaded', async () => {
            const sendMessageBtn = document.getElementById('send-message-btn');
            const formMessage = document.getElementById('form-message');
            const contactForm = document.getElementById('contact-form');
            const mainHeader = document.getElementById('main-header'); // Get the header element

            // Define theme toggle checkboxes here, after DOM is loaded
            themeToggleCheckboxDesktop = document.getElementById('theme-toggle');
            themeToggleCheckboxMobile = document.getElementById('theme-toggle-mobile');
            
            // Language modal elements MUST be defined here
            const languageModal = document.getElementById('language-modal');
            const languageButtonsModal = languageModal.querySelectorAll('button[data-lang]');
            const closeModalBtn = languageModal.querySelector('.close-modal-btn'); // New close button for modal
            const desktopLangSwitchBtn = document.getElementById('desktop-lang-switch-btn');

            // Initial language setup
            if (localStorage.getItem('language')) {
                applyTranslations(localStorage.getItem('language'));
                languageModal.classList.remove('active'); // Hide modal if language is already set
            } else {
                // Show language modal if no language is set
                languageModal.classList.add('active');
            }

            // Language modal button click listener
            languageButtonsModal.forEach(button => {
                button.addEventListener('click', () => {
                    const lang = button.dataset.lang;
                    localStorage.setItem('language', lang);
                    applyTranslations(lang);
                    languageModal.classList.remove('active');
                });
            });

            // Close modal button click listener
            if (closeModalBtn) {
                closeModalBtn.addEventListener('click', () => {
                    languageModal.classList.remove('active');
                });
            }

            // Close modal when clicking outside of it
            if (languageModal) {
                languageModal.addEventListener('click', (e) => {
                    if (e.target === languageModal) {
                        languageModal.classList.remove('active');
                    }
                });
            }


            // Desktop language switch button click listener
            if (desktopLangSwitchBtn) {
                desktopLangSwitchBtn.addEventListener('click', () => {
                    languageModal.classList.add('active'); // Show language selection modal
                });
            }


            // Initialize Firebase App
            try {
                app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                auth = getAuth(app);

                // Attempt to sign in with custom token first
                if (initialAuthToken) {
                    try {
                        await signInWithCustomToken(auth, initialAuthToken);
                        console.log("Firebase authenticated with custom token. User ID:", auth.currentUser?.uid);
                        userId = auth.currentUser?.uid; // Set userId after successful custom token sign-in
                    } catch (error) {
                        console.warn("Custom token sign-in failed, attempting anonymous sign-in:", error);
                        // If custom token fails, try anonymous sign-in as a fallback
                        await signInAnonymously(auth);
                        console.log("Firebase authenticated anonymously. User ID:", auth.currentUser?.uid);
                        userId = auth.currentUser?.uid; // Set userId after successful anonymous sign-in
                    }
                } else {
                    // If no custom token is provided, sign in anonymously
                    await signInAnonymously(auth);
                    console.log("Firebase authenticated anonymously (no custom token provided). User ID:", auth.currentUser?.uid);
                    userId = auth.currentUser?.uid; // Set userId after successful anonymous sign-in
                }

                // Ensure userId is set, fallback to random UUID if still null (shouldn't happen with anonymous auth)
                if (!userId) {
                    userId = crypto.randomUUID();
                    console.warn("User ID was null after authentication, generated a random one:", userId);
                }
                console.log("Current user ID for Firestore operations:", userId);

                firebaseReady = true; // Set flag to true after successful auth
                setButtonState(sendMessageBtn, 'initial'); // Set contact form button to initial state
            } catch (error) {
                console.error("Firebase initialization or authentication error:", error);
                // More specific error message for authentication issues
                if (error.code && error.code === 'auth/requests-to-this-api-identitytoolkit-method-google.cloud.identitytoolkit.v1.authenticationservice.signup-are-blocked.') {
                    formMessage.textContent = translations[currentLanguage].firebaseAuthBlocked;
                } else {
                    formMessage.textContent = translations[currentLanguage].firebaseNotReady;
                }
                formMessage.classList.add('text-red-500');
            }
            
            setThemeFromLocalStorage(); // Call after elements are defined

            const scrollButton = document.getElementById('scroll-button');
            const scrollIcon = document.getElementById('scroll-icon');
            const preloader = document.getElementById('preloader');
            const notFoundPage = document.getElementById('not-found-page');
            const mainContentWrapper = document.getElementById('main-content-wrapper');
            const goBackFrom404Btn = document.getElementById('go-back-from-404');
            const viewProjectLinks = document.querySelectorAll('.view-project-link');
            
            // Hamburger menu elements
            const hamburgerToggleBtn = document.getElementById('hamburger-toggle-btn'); // Changed to button ID
            const mobileMenuOverlay = document.getElementById('mobile-menu-overlay');
            const mobileMenuContent = document.getElementById('mobile-menu-content');
            const mobileMenuCloseBtn = document.getElementById('mobile-menu-close-btn'); // Close button for mobile menu

            // Language buttons (mobile)
            const languageButtonsMobile = document.querySelectorAll('#mobile-menu-content .lang-button');

            // Function to hide preloader and show main content
            const hidePreloaderAndShowContent = () => {
                preloader.style.opacity = '0';
                setTimeout(() => {
                    preloader.style.display = 'none';
                    document.body.style.overflow = 'auto'; // Allow scrolling after preloader hides
                    mainContentWrapper.style.display = 'block'; // Show main content
                    scrollButton.style.display = 'flex'; // Show scroll button
                }, 500); // Fade out duration
            };

            // Listen for full page load
            window.addEventListener('load', hidePreloaderAndShowContent);

            // Fallback to hide preloader after a timeout (e.g., 5 seconds)
            setTimeout(() => {
                if (preloader.style.opacity !== '0') { // Only hide if not already hidden by window.load
                    console.warn("Preloader forced hidden after timeout.");
                    hidePreloaderAndShowContent();
                }
            }, 5000); // 5 seconds timeout

            // Theme Toggle Listener (Desktop)
            if (themeToggleCheckboxDesktop) {
                themeToggleCheckboxDesktop.addEventListener('change', () => {
                    if (themeToggleCheckboxDesktop.checked) {
                        htmlElement.classList.add('dark');
                        localStorage.setItem('theme', 'dark');
                        if (themeToggleCheckboxMobile) themeToggleCheckboxMobile.checked = true; // Sync mobile toggle
                    } else {
                        htmlElement.classList.remove('dark');
                        localStorage.setItem('theme', 'light');
                        if (themeToggleCheckboxMobile) themeToggleCheckboxMobile.checked = false; // Sync mobile toggle
                    }
                });
            }

            // Theme Toggle Listener (Mobile)
            if (themeToggleCheckboxMobile) {
                themeToggleCheckboxMobile.addEventListener('change', () => {
                    if (themeToggleCheckboxMobile.checked) {
                        htmlElement.classList.add('dark');
                        localStorage.setItem('theme', 'dark');
                        if (themeToggleCheckboxDesktop) themeToggleCheckboxDesktop.checked = true; // Sync desktop toggle
                    } else {
                        htmlElement.classList.remove('dark');
                        localStorage.setItem('theme', 'light');
                        if (themeToggleCheckboxDesktop) themeToggleCheckboxDesktop.checked = false; // Sync desktop toggle
                    }
                });
            }

            // Collapsible sections logic for skills
            document.querySelectorAll('.collapsible-header').forEach(header => {
                header.addEventListener('click', () => {
                    const targetId = header.dataset.target;
                    const content = document.getElementById(targetId);
                    if (content) {
                        header.classList.toggle('expanded');
                        content.classList.toggle('expanded');

                        if (content.classList.contains('expanded')) {
                            // If expanding, animate skill bars
                            if (targetId === 'languages-content' || targetId === 'computer-literacy-content') {
                                animateSkillBarsForSection(targetId);
                            }
                        } else {
                            // If collapsing, reset skill bars (optional, but good for re-animation)
                            if (targetId === 'languages-content' || targetId === 'computer-literacy-content') {
                                content.querySelectorAll('.progress-bar-skill').forEach(bar => {
                                    bar.style.width = '0%';
                                });
                            }
                        }
                    }
                });
            });

            // Global variable to hold the animation frame ID
            let currentScrollAnimationId = null;

            // Function to stop any ongoing scroll animation
            function stopScrollAnimation() {
                if (currentScrollAnimationId) {
                    cancelAnimationFrame(currentScrollAnimationId);
                    currentScrollAnimationId = null;
                }
            }

            // Smooth scroll function for slow scroll down
            function smoothScrollDown(targetPosition, duration) {
                stopScrollAnimation(); // Stop any previous animation
                const startPosition = window.pageYOffset;
                const distance = targetPosition - startPosition;
                let startTime = null;

                function animationStep(currentTime) {
                    if (!startTime) startTime = currentTime;
                    const progress = (currentTime - startTime) / duration;
                    const easeLinear = progress;
                    window.scrollTo(0, startPosition + distance * easeLinear);
                    if (progress < 1) {
                        currentScrollAnimationId = requestAnimationFrame(animationStep);
                    } else {
                        currentScrollAnimationId = null; // Animation finished
                    }
                }
                currentScrollAnimationId = requestAnimationFrame(animationStep);
            }

            // Event listeners to stop scrolling on user interaction
            // Added passive: true for performance, removed event.preventDefault() as it's not needed for stopping scrolling
            document.addEventListener('wheel', stopScrollAnimation, { passive: true });
            document.addEventListener('mousedown', stopScrollAnimation, { passive: true });
            document.addEventListener('touchstart', stopScrollAnimation, { passive: true });
            document.addEventListener('keydown', stopScrollAnimation, { passive: true });

            // Scroll button functionality
            scrollButton.addEventListener('click', () => {
                const buffer = 100;
                const isAtBottom = (window.innerHeight + window.scrollY) >= document.body.offsetHeight - buffer;
                
                if (isAtBottom) {
                    window.scrollTo({ top: 0, behavior: 'auto' });
                } else {
                    const remainingScrollHeight = document.body.offsetHeight - (window.innerHeight + window.scrollY);
                    const durationPerPixel = 10;
                    const duration = remainingScrollHeight * durationPerPixel;
                    smoothScrollDown(document.body.offsetHeight - window.innerHeight, duration);
                }
            });

            // Observer to change scroll button icon based on footer visibility
            const footerObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        scrollIcon.classList.remove('fa-arrow-down');
                        scrollIcon.classList.add('fa-arrow-up');
                    } else {
                        scrollIcon.classList.remove('fa-arrow-up');
                        scrollIcon.classList.add('fa-arrow-down');
                    }
                });
            }, {
                root: null,
                threshold: 0.1
            });

            const simpleFooter = document.querySelector('footer');
            if (simpleFooter) {
                footerObserver.observe(simpleFooter);
            }

            // 404 Page Logic
            viewProjectLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    mainContentWrapper.classList.add('hidden');
                    notFoundPage.classList.remove('hidden');
                    document.body.style.overflow = 'hidden'; // Prevent scrolling on 404 page
                });
            });

            goBackFrom404Btn.addEventListener('click', () => {
                notFoundPage.classList.add('hidden');
                mainContentWrapper.classList.remove('hidden');
                document.body.style.overflow = 'auto'; // Re-enable scrolling
            });

            // Contact Form Submission Logic
            if (contactForm) { // Ensure contactForm is defined before adding event listener
                contactForm.addEventListener('submit', async function(e) {
                    e.preventDefault(); // Prevent default form submission

                    const name = document.getElementById('contact-name').value.trim();
                    const email = document.getElementById('contact-email').value.trim();
                    const subject = document.getElementById('contact-subject').value.trim();
                    const message = document.getElementById('contact-message').value.trim();

                    let isValid = true;
                    formMessage.textContent = ''; // Clear previous messages
                    formMessage.classList.remove('text-green-500', 'text-red-500');

                    if (!name) {
                        formMessage.textContent = translations[currentLanguage].nameRequired;
                        formMessage.classList.add('text-red-500');
                        isValid = false;
                    } else if (!email) {
                        formMessage.textContent = translations[currentLanguage].emailRequired;
                        formMessage.classList.add('text-red-500');
                        isValid = false;
                    } else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) { // Basic email validation
                        formMessage.textContent = translations[currentLanguage].emailInvalid;
                        formMessage.classList.add('text-red-500');
                        isValid = false;
                    } else if (!subject) {
                        formMessage.textContent = translations[currentLanguage].subjectRequired;
                        formMessage.classList.add('text-red-500');
                        isValid = false;
                    } else if (!message) {
                        formMessage.textContent = translations[currentLanguage].messageRequired;
                        formMessage.classList.add('text-red-500');
                        isValid = false;
                    }

                    if (isValid) {
                        if (!firebaseReady) { // Check the flag before attempting Firestore operations
                            formMessage.textContent = translations[currentLanguage].firebaseNotReady;
                            formMessage.classList.add('text-red-500');
                            console.error("Form submitted before Firebase was ready.");
                            return;
                        }

                        // Set button to loading state and start progress bar animation
                        setButtonState(sendMessageBtn, 'loading');
                        
                        // Progress bar animatsiyasini qayta ishga tushirish uchun 'active' klassini olib tashlab, qayta qo'shish
                        sendMessageBtn.classList.remove('active'); 
                        void sendMessageBtn.offsetWidth; // Trigger reflow to ensure animation resets
                        sendMessageBtn.classList.add('active'); 

                        try {
                            // Simulate network delay for progress bar to complete (3 seconds)
                            await new Promise(resolve => setTimeout(resolve, 3000)); // Wait for 3 seconds

                            const firestorePath = `artifacts/${appId}/public/data/contactMessages`;
                            console.log("Attempting to write to Firestore path:", firestorePath);
                            console.log("Using userId:", userId);

                            // Store message in Firestore
                            await addDoc(collection(db, firestorePath), {
                                name: name,
                                email: email,
                                subject: subject,
                                message: message,
                                timestamp: serverTimestamp(), // Use server timestamp for consistency
                                userId: userId // Store the user ID who sent the message
                            });

                            formMessage.textContent = translations[currentLanguage].formSubmittedSuccess;
                            formMessage.classList.remove('text-red-500');
                            formMessage.classList.add('text-green-500');
                            contactForm.reset(); // Clear the form
                            setButtonState(sendMessageBtn, 'finished'); // Set to finished state

                            // Clear message after a delay and reset button to initial state
                            setTimeout(() => {
                                formMessage.textContent = ''; // Clear message after a delay
                                formMessage.classList.remove('text-green-500');
                                setButtonState(sendMessageBtn, 'initial'); // Reset button after success
                            }, 2000); // Clear after 2 seconds in finished state
                        } catch (error) {
                            console.error("Error writing document to Firestore: ", error);
                            formMessage.textContent = translations[currentLanguage].formSubmissionError;
                            formMessage.classList.remove('text-green-500');
                            formMessage.classList.add('text-red-500');
                            setButtonState(sendMessageBtn, 'initial'); // Reset button on error
                        }
                    } else {
                        // Validation failed, button should remain in initial state
                        setButtonState(sendMessageBtn, 'initial');
                    }
                });
            } else {
                console.error("Contact form element not found. Contact form submission will not work.");
                formMessage.textContent = translations[currentLanguage].formSubmissionError + " (Aloqa formasi elementi topilmadi).";
                formMessage.classList.add('text-red-500');
            }

            // Initial clock update and set interval for real-time updates
            updateClock();
            setInterval(updateClock, 1000); // Update every second

            // Hamburger menu logic
            if (hamburgerToggleBtn && mobileMenuOverlay && mobileMenuContent && mainHeader) {
                hamburgerToggleBtn.addEventListener('click', () => {
                    hamburgerToggleBtn.classList.toggle('active'); // Toggle active class for X transform
                    mobileMenuOverlay.classList.toggle('active');
                    mobileMenuContent.classList.toggle('active');

                    // No need to set height/top dynamically here, as overlay is full screen
                    document.body.style.overflow = mobileMenuOverlay.classList.contains('active') ? 'hidden' : 'auto'; // Prevent scrolling when menu is open
                });
            } else {
                console.error("Hamburger menu elements or main header not found. Mobile menu functionality may be limited.");
            }

            // Close mobile menu when clicking the close button
            if (mobileMenuCloseBtn) {
                mobileMenuCloseBtn.addEventListener('click', () => {
                    if (hamburgerToggleBtn) hamburgerToggleBtn.classList.remove('active'); // Reset hamburger icon
                    mobileMenuOverlay.classList.remove('active');
                    mobileMenuContent.classList.remove('active');
                    document.body.style.overflow = 'auto'; // Re-enable scrolling
                });
            }

            // Close mobile menu when clicking outside (on the overlay)
            if (mobileMenuOverlay) { // Check if element exists
                mobileMenuOverlay.addEventListener('click', (e) => {
                    if (e.target === mobileMenuOverlay) {
                        if (hamburgerToggleBtn) hamburgerToggleBtn.classList.remove('active'); // Reset hamburger icon
                        mobileMenuOverlay.classList.remove('active');
                        mobileMenuContent.classList.remove('active');
                        document.body.style.overflow = 'auto'; // Re-enable scrolling
                    }
                });
            }

            // Language buttons (mobile menu) click listener
            languageButtonsMobile.forEach(button => {
                button.addEventListener('click', () => {
                    const lang = button.dataset.lang;
                    localStorage.setItem('language', lang);
                    applyTranslations(lang);
                    // Close mobile menu after language selection
                    if (hamburgerToggleBtn) hamburgerToggleBtn.classList.remove('active');
                    if (mobileMenuOverlay) mobileMenuOverlay.classList.remove('active');
                    if (mobileMenuContent) mobileMenuContent.classList.remove('active');
                    document.body.style.overflow = 'auto'; // Re-enable scrolling
                });
            });

            // Sync theme toggles
            if (themeToggleCheckboxDesktop && themeToggleCheckboxMobile) {
                themeToggleCheckboxDesktop.addEventListener('change', () => {
                    themeToggleCheckboxMobile.checked = themeToggleCheckboxDesktop.checked;
                    localStorage.setItem('theme', themeToggleCheckboxDesktop.checked ? 'dark' : 'light');
                    htmlElement.classList.toggle('dark', themeToggleCheckboxDesktop.checked);
                });

                themeToggleCheckboxMobile.addEventListener('change', () => {
                    themeToggleCheckboxDesktop.checked = themeToggleCheckboxMobile.checked;
                    localStorage.setItem('theme', themeToggleCheckboxMobile.checked ? 'dark' : 'light');
                    htmlElement.classList.toggle('dark', themeToggleCheckboxMobile.checked);
                });

                // Initial sync on load
                const currentTheme = localStorage.getItem('theme');
                if (currentTheme === 'dark') {
                    themeToggleCheckboxDesktop.checked = true;
                    themeToggleCheckboxMobile.checked = true;
                    htmlElement.classList.add('dark');
                } else {
                    themeToggleCheckboxDesktop.checked = false;
                    themeToggleCheckboxMobile.checked = false;
                    htmlElement.classList.remove('dark');
                }
            } else {
                console.warn("Theme toggle checkboxes not found or not fully initialized.");
            }
        });
    </script>

</body>
</html>
